* COMMENT Hello chords!
* steps
** to iterate
*** load library
perchance to dream
https://common-lisp.net/project/iterate/doc/index.html#Top

http://www.gigamonkeys.com/book/programming-in-the-large-packages-and-symbols.html
In the REPL buffer in SLIME you can also change packages with a REPL shortcut. Type a comma, and then enter change-package at the Command: prompt.
#+BEGIN_SRC lisp
(ql:quickload "iterate")
(in-package #:iterate)

;; (mapcar #'package-name (package-use-list :cl-user))
#+END_SRC

#+RESULTS:
: #<Package "ITERATE">
*** basic collect
#+BEGIN_SRC lisp
(iterate 
  (for n from 1 to 10)
  (collect (* n n)))
#+END_SRC

#+RESULTS:
| 1 | 4 | 9 | 16 | 25 | 36 | 49 | 64 | 81 | 100 |
*** iterate in parallel
#+BEGIN_SRC lisp
(iterate 
  (for n from 2 to 3)
  (for k in '(10 100))
  (collect (* k n)))
#+END_SRC

#+RESULTS:
| 20 | 300 |
*** nested iterate loop
#+BEGIN_SRC lisp
(iterate 
  (for n from 1 to 10)
  (collect
      (iterate 
	(for k in '(10 100 1000))
	(collect (* k n)))))
#+END_SRC

#+RESULTS:
|  10 |  100 |  1000 |
|  20 |  200 |  2000 |
|  30 |  300 |  3000 |
|  40 |  400 |  4000 |
|  50 |  500 |  5000 |
|  60 |  600 |  6000 |
|  70 |  700 |  7000 |
|  80 |  800 |  8000 |
|  90 |  900 |  9000 |
| 100 | 1000 | 10000 |

#+BEGIN_SRC lisp
(iter (for x from 1 to 24)  
 (collect x into xs)
 (collect (random2 0 10) into ys)
 (finally (return (mk-bpf xs ys))))
#+END_SRC
** many pc-octaves
#+BEGIN_SRC lisp
(let ((pc-sets '((0 1 3) (0 4 8))))
  (iterate:iter 
    (iterate:for pc-set in pc-sets)
    (iterate:collect (reverse pc-set))))

(let ((pc-sets '((0 1 3) (0 4 8))))
  (iterate:iter 
    (iterate:for pc-set in pc-sets)
    (iterate:collect
	(iterate:iter (iterate:for pc in pc-set)
		      (iterate:collect (+ 12 pc))))))


(iterate:iter 
	   (iterate:for i in '(0 1 3 4))
	   (iterate:collect (mapcar #'(lambda (x) (+ x i)) '(36 48 60))))

(let ((pc-set '(0 1 3)))
  (iterate:iter 
    (iterate:for i in pc-set)
    (iterate:collect (mapcar #'(lambda (x) (+ x i)) '(36 48 60)))))

(let ((pc-sets '((0 1 3) (0 1 4))))
  (iterate:iter 
    (iterate:for pc-set in pc-sets)
    (iterate:collect
	(iterate:iter 
	  (iterate:for i in pc-set)
	  (iterate:collect (mapcar #'(lambda (x) (+ x i)) '(36 48 60)))))))


(iterate:iter 
  (iterate:for pc-set in pc-sets)
  (iterate:collect
      (iterate:iter 
	(iterate:for i in pc-set)
	(iterate:collect (mapcar #'(lambda (x) (+ x i)) oct-list)))))

(let ((pc-sets '((0 1 4))))
  (iterate:iter 
    (iterate:for pc-set in pc-sets)
    (iterate:collect
	(iterate:iter 
	  (iterate:for i in pc-set)
	  (iterate:collect (mapcar #'(lambda (x) (+ x i)) '(36 48 60)))))))
#+END_SRC
** 
This is a classical combinatorial
problem where our stating point is a
12-tone 'mother-chord' (1).  We want to
search all 4-note subsets of the
mother-chord. This can be formulated as
a PMC search so that we first define a
search-space which is 4 times a list of
indexes ranging from 0 to 11 (2).

Next, in the rules (3) we first always
guarantee that the resulting indexes
list is in ascending order (see the
first rule 'ascending order'). When we
apply this rule alone we get 495
subsets. 

We can further constrain the search by
using the 'rule-filter' box (4) to turn
on or off the two other rule options:
'sc identity' and symmetric chord'.

The results can be analyzed with the
'sc-name' box (5). The final result can
be inspected in a 'chord-editor' (6)
which displays the chords as a matrix.
* all pmc syntax and rules
** single wildcard
#+BEGIN_SRC lisp
(in-package :ccl)

;; l is the partial solution (including the current candidate) found
;; so far by the search-engine.



(* 
   (?if (apply #'< l)) ;note, the "less than" binary relation/operator on l, *not* rl
  "Result in ascending order")

;TRY FOR INSTANCE ONE OF THESE: '4-1 '4-Z15A '4-27A 
(* 
 (?IF (LET ((SUBSET (PW::POSN-MATCH (PWGL-VALUE :CHORD) L)))
        (AND (SETP SUBSET :KEY #'MOD12)
             (MEMBER (SC-NAME SUBSET) '#.(CCL::ALL-SUBS '4-1))))) 
 "SC IDENTITY")
#+END_SRC 
** ?1 rules
#+BEGIN_SRC lisp


(* ?1 
   (?if (not (member ?1 (rest rl)))) 
   "No duplicates")

(* ?1 
   (?if (not (member (mod12 ?1) (rest rl) :key #'mod12))) 
   "no octaves")

(* ?1 
   (?if (not (member (mod12 ?1) (rest rl) :key #'mod12)))
   "No pitch class duplicates")

(* ?1  (= (length l) (cur-slen)) 
   (?if (sym-chord? l)) 
   "symmetry")

(* ?1 
   (?if (and (setp l :key #'mod12)
             (member (sc-name l) (pwgl-value :all-subs)))) 
   "SC")

(* ?1 
   (?if (if (grace-note-p ?1)
            (or (<= 23 (m ?1) 58) (<= 71 (m ?1) 102))
          (<= 59 (m ?1) 70)))
   "ranges")

(* ?1 (not (grace-note-p ?1)) 
   (?if (let ((ms (m ?1 :l t :l-filter #'(lambda (n) (not (grace-note-p n)))))) 
          (setp ms :key #'mod12)))
   "normal note setp")

(* ?1 
   (?if
     (if (grace-note-p ?1)
         (setf (color ?1) :red)
         (setf (color ?1) :blue))) 
    "red for harp and blue for voice")

(* ?1 
   (?if 
    (if (grace-note-p ?1)
	(setf (chan ?1) 1)
	(setf (chan ?1) 2))) 
   "channels for instruments")

(* ?1 
   (?if 
    (setf (vel ?1)
	  (cond ((e ?1 "six") 127)
             ((e ?1 "seven") 50)
             (t 64)))) 
   "velocity for the groups")

(* ?1 
   (?if (member (mod (m ?1) 12) '(0 2 4 5 7 9 11)))
   "use the ionian mode")

(* ?1 :harmony 
  (?if (setp (m ?1))) 
  "no harm pitch repetitions")

(* ?1 :harmony 
  (?if (setp (m ?1 :data-access :harm-int)))
   "no harm int repetitions")

(* ?1  :harmony
    (?if (let ((ints (m ?1 :complete? t :data-access :harm-int)))
            (?incase ints (member ints '((4 4) (5 6)) :test #'equal))))
       "3 voice harm int rule")

(* ?1 :harmony 
 (?if (let ((ms (m ?1 :complete? t)))
        (if ms 
         (add-expression 'group (give-bass-item ?1) :info (sc-name ms))
         ())))
   "analyse harmonic scs")

(* ?1 :harmony
   (?if 
    (every #'(lambda (n) 
               (cond ((> (partnum n) (partnum ?csv)) (< (m n) (m ?csv)))
                     ((< (partnum n) (partnum ?csv)) (> (m n) (m ?csv)))
                     (T T))) (m ?1 :object t)))
   "no part-crossings")

; harmonic
(* ?1  :harmony
   (?if (let ((h-midis (m ?1)))
          (and (setp h-midis :key #'mod12)
               (member (sc-name h-midis) '#.(ccl::all-subs '(6-20))))))
   "harm SC rule")

(* ?1  :harmony
   (?if (let ((ms (m ?1 :complete? t)))
          (?incase ms (sym-chord? (sort< (m ?1))))))
   "symmetric chord")

; voice-leading
(* ?1 :harmony
   (?if (every #'(lambda (n) 
                   (cond ((> (partnum n) (partnum ?csv)) (< (m n) (m ?csv)))
                         ((< (partnum n) (partnum ?csv)) (> (m n) (m ?csv)))
                         (T T))) (m ?1 :object t)))
   "no voice-crossings")

(* ?1 :harmony 
   (?if (let ((int (first (m ?1 :data-access :int :complete? t))))
          (?incase int (> int 0))))
   "no unisons and voice crossings")

(* ?1 :harmony 
   (?if (let ((int (first (m ?1 :data-access :int :complete? t))))
          (?incase int (member int '(0 3 4 7 8 9 12 15 16)))))
   "allowed intervals between the two voices")

(* ?1 :harmony 
   (?if (let ((vl (matrix-access (m ?1 :vl-matrix t :complete? t) :h)))
          (?incase vl
              (destructuring-bind ((up1 up2) (down1 down2)) vl
                (?incase (> (abs (- up1 up2)) 2)
                  (<= (abs (- down1 down2)) 2))))))
   "if the upper voice leaps, lower voice must use stepwise movement")

(* ?1 :harmony
   (?if (let ((vl (matrix-access (m ?1 :vl-matrix t :complete? t) :h)))
          (?incase vl
              (destructuring-bind ((up1 up2) (down1 down2)) vl
                (?incase (and (member (- up2 down2) '(7 12))
                         (> (abs (- up1 up2)) 2))
                    (/= (signum (- up1 up2)) (signum (- down1 down2))))))))
   "no hidden parallel fifths or octaves UNLESS the upper voice uses stepwise movement")

(* ?1  :parts '(1 3)
   (?if (setf (vel ?1) 60)) 
    "set sop/bass vel")

(* ?1 :chord :parts 2
   (?if (dolist (n (notes ?1))
           (setf (vel n) 30))) 
    "set chord vel")

(* ?1 :chord :parts '(1 3)
    (?if (let ((ints (m ?1 :data-access :harm-int)))
           (if ints
             (and (not (member  1 ints)) (apply #'>= ints))
              t)))
       "no min seconds and ascending chord ints rule, parts 1,3")

(* ?1 :chord 
   (?if  (when (m ?1 :complete? t)
           (dolist (n (notes ?1))
             (if (< (midi n) 60)
                 (setf (clef-number n) 1)         
               (setf (clef-number n) 0))))) 
   "assign notes below 60 to bass clef")

(* ?1 :chord 
   (?if 
    (let ((ms (m ?1 :complete? t)) vel)
      (when ms
        (setq vel
              (case (length ms)
                (6 127)(5 117)(4 107)(3 97)(2 87)(t 77)))
        (dolist (n (notes ?1)) (setf (vel n) vel))))) 
   "set velocity")

(* ?1 :chord
    (?if (let ((ms (m ?1 :complete? t)))
           (?incase ms
	     (and (setp ms :key #'mod12)
                  (member (sc-name ms) '#.(ccl::all-subs '(4-27a)))))))
   "harm rule")

(* ?1 :chord
    (?if (let ((ints (m ?1 :data-access :harm-int)))
           (?incase ints
             (and (not (member  1 ints))
                  (apply #'>= ints)))))
       "no sharp int/asc harm ints rule")

(* ?1 :chord
    (?if (let ((ms (m ?1 :complete? t)))
           (?incase ms
	     (and (setp ms :key #'mod12)
                  (member (sc-name ms) '#.(ccl::all-subs '(6-Z47B)))))))
   "chord rule")

(* ?1 :chord
   (?if (let ((ints (m ?1 :data-access :harm-int)))
          (?incase ints
              (and (every #'(lambda (int) (<= 5 int 11)) ints) 
                   (apply #'>= ints)))))
   "harm-int between 5 and 11")

(* ?1 :chord 
   (?if 
    (when (m ?1 :complete? t)
        (dolist (n (notes ?1))
          (if (and (< (midi n) 60) (grace-note-p ?1))
              (setf (clef-number n) 1)         
            (setf (clef-number n) 0))))) 
   "assign midis below 60 to bass clef for grace notes")

(* ?1 :score-sort  
   (?if (let ((ms (m ?1 :rl 3)))  
          (not (member (sc-name ms) '(3-10 3-11a 3-11b 3-12)))))
   "no score-sort triads")

(* ?1 :score-sort  
   (?if (let ((ms (m ?1 :rl 7)))  
          (not (member (mod12 (m ?1)) (rest ms) :key #'mod12))))
   "score-sort mod12 repetition")

(* ?1 :parts 1  (e ?1 :fermata)
   (?if (member (mod (m ?1) 12) '(0 7)))
   "in the cadence, the upper voice must end with either C or G")

(* ?1 :parts 2  (e ?1 :fermata)
   (?if (= (mod (m ?1) 12) 0))
   "in the cadence, the lower voice must end with a C")

#|
(* ?1 (not (grace-note-p ?1)) 
   (?if (let ((ms (m ?1 :l 3 :l-filter #'(lambda (n) (not (grace-note-p n)))))) 
          (not (member (sc-name ms) '(3-10 3-11a 3-11b 3-12)))))
   "normal note scs")
|#
#+END_SRC 
** ?1 ?2
#+BEGIN_SRC lisp
(* ?1 ?2 
   (?if (< ?1 ?2)) 
   "ascending")

(* ?1 ?2 
   (?if (member (mod12 (- ?2 ?1)) '(5 6)))
   "mod12 Interval rule")

(* ?1 ?2 
   (?if (member (- ?2 ?1) '(5 6))) 
      "Interval rule")

(* ?1 ?2 
   (?if (member (- ?2 ?1) '(1 2 3 4 5 7 8 9))) 
   "harm ints") 

(* ?1 ?2 
   (?if (unique-int? (mod12 (- ?2 ?1)) (rest rl) :key #'mod12)) 
   "no (modulo 12) interval duplicates")

(* ?1 ?2                     ;;PM-part
  (?if (/= ?1 ?2))         ;;Lisp-code part
  "No equal adjacent values")

(* ?1 ?2                          ;;PM-part
  (?if (/= (m ?1) (m ?2))) ;;Lisp-code part
  "no adjacent melodic pitch dups")

(* ?1 ?2
  (?if (member (- (m ?2) (m ?1)) '(1 -1 2 -2))) 
  "melodic interval")

(* ?1 ?2 :harmony 
  (?if (not (equal (m ?1) (m ?2)))) 
  "no adjacent harmonic pitch dups")

(* ?1 ?2 
   (?if (abs (- ?2 ?1)))
   "prefer large intervals") 

(* ?1 ?2 
   (?if (- (abs (- ?2 ?1))))
   "prefer small intervals")

(* ?1 ?2 
   (?if (< (- ?2 ?1) 12)) 
   "intervals inside octave")

(* ?1 ?2 
   (?if (member (- (m ?2) (m ?1)) '(1 -1 2 -2))) 
   "mel interval")

(* ?1 ?2 
   (?if (member (- ?2 ?1) '(1 -1 2 -2))) 
   "interval")

(* ?1 ?2 :parts '(1 3)
    (?if (member (- (m ?2) (m ?1)) '(-1 -2 1 2 -3 -4 3 4)))
    "mel int rule for parts 1 and 3")

; melodic
(* ?1 ?2 
   (?if (< (abs (- (m ?2) (m ?1))) 8))
   "max mel int rule")

(* ?1 ?2   
   (?if 
    (if (and (grace-note-p ?1) (grace-note-p ?2))
       (member (abs (- (m ?2) (m ?1))) '(0))
       (member (abs (- (m ?2) (m ?1))) '(1 2 5 7))))
   "grace int rule")

(* ?1 ?2  
   (?if (member (abs (- (m ?2) (m ?1))) '(1 2 5 7))) 
   "mel int rule")

(* ?1 ?2 :harmony
   (?if (let ((ints1 (m ?1 :data-access :harm-int))
              (ints2 (m ?2 :data-access :harm-int :complete? t)))
          (?incase ints2  (not (equal ints1 ints2)))))
   "no adjacent equal chord ints")

(* ?1 ?2 :harmony
   (?if (let ((ints1 (m ?1 :data-access :harm-int))
              (ints2 (m ?2 :data-access :harm-int :complete? t)))
          (?incase ints2  (not (equal ints1 ints2)))))
   "no adjacent equal chord ints")

(* ?1 ?2 :harmony  
   (?if (?incase (m ?2 :complete? t)
            (let* ((sop1 (m ?1 :data-access :max)) (sop2 (m ?2 :data-access :max))
                   (bas1 (m ?1 :data-access :min)) (bas2 (m ?2 :data-access :min)))
              (and (/= (mod12 sop1) (mod12 bas2)) 
                   (/= (mod12 sop2) (mod12 bas1))))))
   "no sop/bas mod12 cross-relation")

(* ?1 ?2 :harmony  
   (?if (let* ((p1 1) (p2 6)
               (m11 (m ?1 :parts p1)) (m12 (m ?2 :parts p1)) 
               (m21 (m ?1 :parts p2)) (m22 (m ?2 :parts p2)))
          (?incase (and m11 m12 m21 m22)
            (and (/= (mod12 m11) (mod12 m22)) 
                 (/= (mod12 m12) (mod12 m21))))))
   "no mod12 cross-relation in parts p1+p2")
  
(* ?1 ?2 :harmony 
   (?if (?incase (m ?2 :complete? t)
          (let* ((sop1 (m ?1 :data-access :max)) (sop2 (m ?2 :data-access :max))
                 (bas1 (m ?1 :data-access :min)) (bas2 (m ?2 :data-access :min))
                 (sopint (- sop2 sop1)) (basint (- bas2 bas1)))
            (?incase  (or (and (plusp sopint) (plusp basint))
                          (and (minusp sopint) (minusp basint)))
              (or (<= (abs sopint) 1) (<= (abs basint) 1))))))
   "no jumps in parallel sop-bass movements")

(* ?1 ?2 :harmony
   (?if (let ((int1 (first (m ?1 :data-access :int :complete? t)))
              (int2 (first (m ?2 :data-access :int :complete? t))))
          (?incase (and int1 int2)
              (?incase (= int1 7) (not (= int2 7))))))
   "no parallel fifths")

(* ?1 ?2 :harmony 
   (?if (let ((int1 (first (m ?1 :data-access :int :complete? t)))
              (int2 (first (m ?2 :data-access :int :complete? t))))
          (?incase (and int1 int2)
              (?incase (= int1 12) (not (= int2 12))))))
   "no parallel octaves")



(* ?1 ?2 :chord   
  (?if (let ((m1 (m ?1 :data-access :min)) (m2 (m ?2 :data-access :min)))
     (?incase (and m1 m2) (member (- m2 m1) '(0 5 6 4)))))
   "multipart bass int rule")

(* ?1 ?2 :chord 
   (?if (let ((m1 (m ?1 :data-access :max)) (m2 (m ?2 :data-access :max :complete? t)))
     (?incase (and m1 m2) (member (- m2 m1) (if (e ?2 "jump") '(8) '(8 -1))))))
   "multipart top int rule")

(* ?1 ?2 (?if (<= (abs (- (m ?2) (m ?1))) 23)) 
  "max interval")

(* ?1 ?2 (and (grace-note-p ?1) (not (grace-note-p ?2)))
   (?if (<= (abs (- (m ?2) (m ?1))) 13)) 
   "max interval for grace-normal")

(* ?1 ?2 :parts 1 
   (?if (not (member (abs (- (m ?2) (m ?1))) '(6))))
   "no tritone in the upper part")

(* ?1 ?2 
   (?if (<= (abs (- (m ?2) (m ?1))) 9))
   "melodic leaps smaller or equal than major sixth")

(* ?1 ?2 :parts 1 
   (?if (/= (m ?1) (m ?2)))
   "no repetitions in the upper part")



(* ?1 ?2  (e ?2 :fermata)
   (?if (<= (abs (- (m ?2) (m ?1))) 2))
   "the cadence must be approached with stepwise movement")


;; note: Laurson dissertation states: It is important to note that a
;; pattern can contain only one wild card at a time.

(* ?1 * ?2
   (?if (/= (mod12 (m ?1)) (mod12 (m ?2))))
   "mel duplicate rule")

(* ?1 * ?2 
  (?if (/= ?1 ?2))
   "no pitch-class dups")

(* ?1 * ?2  :harmony (m ?2 :complete? t)
   (?if 
    (not (equal (m ?1) (m ?2))))
   "no chord duplicates, note the 2-wildcard case")

#+END_SRC 
** 
#+BEGIN_SRC lisp
(* ?1 ?2 ?3 (zerop (mod (1- (notenum ?1)) 3))
   (?if (eq-SC? '(3-5a 3-5b) (list (m ?1) (m ?2) (m ?3))))
   "set-classes of adjacent 3-note groups")

(* ?1 ?2 * ?3 ?4 :pm-overlap 1
   (?if (/= (mod12 (- ?2 ?1)) (mod12 (- ?4 ?3)))) 
   "no (modulo 12) interval duplicates")

(* ?1 ?2 ?3 ?4 :chord 
   (?if (let ((m1 (m ?1 :data-access :max)) (m2 (m ?2 :data-access :max)) 
              (m3 (m ?3 :data-access :max)) (m4 (m ?4 :data-access :max :complete? t)))
          (?incase (and m1 m2 m3 m4)
              (member (sc-name (list m1 m2 m3 m4)) '#.(ccl::all-subs '(6-Z47B))))))
   "multipart top int rule")

(* ?1 ?2 ?3 ?4 :chord 
   (?if (let ((m1 (m ?1 :data-access :min)) (m2 (m ?2 :data-access :min)) 
              (m3 (m ?3 :data-access :min)) (m4 (m ?4 :data-access :min :complete? t)))
          (?incase (and m1 m2 m3 m4)
              (member (sc-name (list m1 m2 m3 m4)) '#.(ccl::all-subs '(6-Z47B))))))
   "multipart bottom int rule")

(* ?1 ?2 ?3  
   (?if (not (member (sc-name (list (m ?1)(m ?2)(m ?3))) '(3-10 3-11a 3-11b 3-12)))) 
   "no triads at all")

(* ?1 ?2 ?3 ?4 
   (?if (eq-sc? '(4-1 4-3 4-6 4-7 4-8 4-9 4-10 4-23) (m ?1)(m ?2)(m ?3)(m ?4))) 
   "scs")

(* ?1 ?2 ?3 
   (?if (let ((int1 (- (m ?2) (m ?1)))
              (int2 (- (m ?3) (m ?2))))
          (?incase (>= (abs int1) 6)
            (and (< (abs int2) 3)
                 (not (= (signum int1) (signum int2)))))))
   "if the melody leaps more thaa augmented fourth, balance with stepwise contrary motion")

#+END_SRC 
** 
#+BEGIN_SRC lisp
;; index rules
(i1 i2 i4 i6 
  (?if (eq-SC? '(4-1) i1 i2 i4 i6)) 
  "index rule")

(i4
 (?if (let ((subset (pw::posn-match (pwgl-value :chord) l)))
        (sym-chord? subset) ))
 "symmetric chord") 

(i1 i2 i11 i12 
    (?if (= (+ (mod12 (- i2 i1)) (mod12 (- i12 i11))) 12)) 
    "complement int.pairs (indexes 1-2/11-12)")

(i3 i4 i9 i10 
    (?if (= (+ (mod12 (- i4 i3)) (mod12 (- i10 i9))) 12)) 
    "complement int.pairs (index 3-4/9-10)")

(i5 i6 i7 i8 
    (?if (= (+  (mod12 (- i6 i5)) (mod12 (- i8 i7))) 12)) 
    "complement int.pairs (index 5-6/7-8)")

(i1 i2 i3 i4 i5 i6
    (?if (eq-set  
          '(|6-1| |6-8| |6-14A| |6-14B| |6-20| |6-32| )    
          i1 i2 i3 i4 i5 i6)) 
    "6-card scs without tritones = tritone in the middle") 

(i7 i8 i9 i10 i11 i12
    (?if (eq-set 
          '(|6-1| |6-8| |6-14A| |6-14B| |6-20| |6-32| )       
          i7 i8 i9 i10 i11 i12)) 
    "6-card scs w/o tritones = tritone in the middle")
(i1 
 (?if 
  (setf (staff (read-key i1 :part)) (make-instance 'piano-staff)))
 "piano-staff") 

#+END_SRC 
** 
#+BEGIN_SRC lisp
;;; hightlights:
;;; (1) :or
;;; (2) ?1 * ?2
;;; (3) reading the plist of an expression

;***********************************************************************************************
;rules about tonality and harmonic progression
;***********************************************************************************************

(* ?1
   (?if (member (mod12 (m ?1)) '(0 2 4 5 7 9 11)))
   "Scale of C-major")

(* ?1 :harmony
   (?if (?incase (m ?1 :complete? t)
            (let ((sop (m ?1 :data-access :max :object t))
                  (bass (m ?1 :data-access :min)))
              (let ((degree (e sop :group)))
                (case (getf (plist degree) :degree) 
                  ;; using the keyword like this is for convenience only,
                  ;; we could also compare the print-symbol of the expressions
                  (:I (member (mod bass 12) '(0 4 7)))
                  (:IV (member (mod bass 12) '(5 9 0)))
                  (:V (member (mod bass 12) '(7 11 2))))))))
   "Harmonic pitches. Degrees are written in the plist of the expressions (can be accessed with Shift+I)")

#+END_SRC 
** 
#+BEGIN_SRC lisp
;***********************************************************************************************
; rules about the alberti bass
;***********************************************************************************************

(:or
 (?1 * ?2 :beat :parts '((1 "Left-hand"))
     (?if
      (let ((ints1 (m ?1 :data-access :int :complete? t))
            (ints2 (m ?2 :data-access :int :complete? t)))
        (?incase (and ints1 ints2)
            (every #'(lambda(x y) (and (= (signum x) (signum y)) (<= 0 (abs (- x y)) 1))) ints1 ints2))))
     "mimic the arpeggiated; max deviation = 1")

 (?1 * ?2 :beat :parts '((1 "Left-hand"))
     (?if
      (let ((ints1 (m ?1 :data-access :int :complete? t))
            (ints2 (m ?2 :data-access :int :complete? t)))
        (?incase (and ints1 ints2)
            (every #'(lambda(x y) (and (= (signum x) (signum y)) (<= 0 (abs (- x y)) 2))) ints1 ints2))))
     "mimic the arpeggiated; max deviation = 2")
"mimic the arpeggiated figure established in the first beat")

(* ?1 :beat :parts '((1 "Left-hand"))
   (?if
    (let ((ints (m ?1 :data-access :int :complete? t)))
      (?incase ints (not (apply #'= (mapcar #'abs ints))))))
   "No tremolando")

(* ?1 ?2 :beat :parts '((1 2))
   (?if (let ((m1 (first (m ?1)))
              (m2 (first (m ?2))))
          (?incase (and m1 m2) (<= 0 (abs (- m2 m1)) 4))))
   "Small intervals (<= fifth) between the first notes of consecutive figures")


 ("favor ascending intervals"
  ((* ?1 ?2  (?if (let ((iv (- (m ?2) (m ?1))))
                    (if (plusp iv) 1 0))))))

 ("favor repeats"
  ((* ?1 ?2 (?if (let ((iv (abs (- (m ?1) (m ?2)))))
                   (case iv
                     (0 (random 100))
                     (t (random 10))))))))

 ("favor perfect fourths"
  ((* ?1 ?2 (?if (let ((iv (abs (- (m ?1) (m ?2)))))
                   (case iv
                     (5 1)
                     (t 0)))))))

 ("favor small intervals"
  ((* ?1 ?2 (?if (let ((iv (abs (- (m ?1) (m ?2)))))
                   (if (zerop iv)
                       -100
                     (- iv)))))))
 
 ("favor big intervals"
  ((* ?1 ?2 (?if (let ((iv (abs (- (m ?1) (m ?2)))))
                   iv)))))

 ("favor scale-wise motion"
  ((* ?1 ?2 (?if (let ((iv (abs (- (m ?2) (m ?1)))))
                   (if (<= 1 iv 2)
                       100
                     0))))
   (* ?1 ?2 ?3 (?if (let ((iv1 (- (m ?2) (m ?1)))
                          (iv2 (- (m ?3) (m ?2))))
                      (if (and (= (signum iv1) (signum iv2))
                               (and (<= 1 (abs iv1) 2) 
                                    (<= 1 (abs iv2) 2)))
                          100
                        0)))))))



(* ?1 (e ?1 "6/2")
   (?if (let* ((pos (e ?1 "6/2" :pos))
               (midis (m ?1 :l  pos))
               (ref-cont '(1 0)))
          (eq-subcontour? ref-cont (contour midis))))
   "6/2")

(* ?1 (e ?1 "6/3")
   (?if (let* ((pos (e ?1 "6/3" :pos))
               (midis (m ?1 :l  pos))
               (ref-cont '(2 0 1)))
          (eq-subcontour? ref-cont (contour midis))))
   "6/3")

(* ?1 (e ?1 "6/4")
   (?if (let* ((pos (e ?1 "6/4" :pos))
               (midis (m ?1 :l  pos))
               (ref-cont '(3 0 2 1)))
          (eq-subcontour? ref-cont (contour midis))))
   "6/4")

(* ?1 (e ?1 "6/5")
   (?if (let* ((pos (e ?1 "6/5" :pos))
               (midis (m ?1 :l  pos))
               (ref-cont '(4 0 3 1 2)))
          (eq-subcontour? ref-cont (contour midis))))
   "6/5")

(* ?1 (e ?1 "6/6")
   (?if (let* ((pos (e ?1 "6/6" :pos))
               (midis (m ?1 :l  pos))
               (ref-cont '(5 0 4 1 3 2)))
          (eq-subcontour? ref-cont (contour midis))))
   "6/6")

(* ?1 (e ?1 "6/7")
   (?if (let* ((pos (e ?1 "6/7" :pos))
               (midis (m ?1 :l  pos))
               (ref-cont '(6 0 5 1 4 2 3)))
          (eq-subcontour? ref-cont (contour midis))))
   "6/7")

(* ?1 (e ?1 "7/2")
   (?if (let* ((pos (e ?1 "7/2" :pos))
               (midis (m ?1 :l  pos))
               (ref-cont '(0 1)))
          (eq-subcontour? ref-cont (contour midis))))
   "7/2")

(* ?1 (e ?1 "7/3")
   (?if (let* ((pos (e ?1 "7/3" :pos))
               (midis (m ?1 :l  pos))
               (ref-cont '(1 2 0)))
          (eq-subcontour? ref-cont (contour midis))))
   "7/3")

(* ?1 (e ?1 "7/4")
   (?if (let* ((pos (e  ?1 "7/4" :pos))
               (midis (m ?1 :l  pos))
               (ref-cont '(1 2 0 3)))
          (eq-subcontour? ref-cont (contour midis))))
   "7/4")

(* ?1 (e ?1 "7/5")
   (?if (let* ((pos (e  ?1 "7/5" :pos))
               (midis (m ?1 :l  pos))
               (ref-cont '(2 3 1 4 0)))
          (eq-subcontour? ref-cont (contour midis))))
   "7/5") 

#+END_SRC 
** 
#+BEGIN_SRC lisp
;;; very domain specific rules


;========================================================
;; assumes part order: 1 sop 2 rest 3 bass 4 midv
;========================================================
; melodic 
;ints
;R1
(* ?1 ?2 :parts '(1 3) 
   (?if (<= (abs (-  (m ?2) (m ?1))) 9)) "max 9 mel int")

;R2
(* ?1 ?2 ?3  :parts '(1 3) 
   (?if (let ((disallowed-ints '((1 1) (-1 -1) ;; same dir 1s
                                 (5 2)(-5 -2)(2 5)(-2 -5)  
                                 (-2 7)(2 -7)(-7 2)(7 -2)(-5 7)(5 -7)(7 -5)(-7 5)))) ;; 3-9 same dir 5 + 2 
          (not (member (list (- (m ?2) (m ?1)) (- (m ?3) (m ?2))) disallowed-ints :test #'equal)))) 
  "disallowed-2ints") 

;R3
(* ?1 ?2 ?3  :parts '(1 3) 
   (?if (not (eq-sc? '(3-11a 3-11b) (m ?1) (m ?2) (m ?3)))) 
   "disallowed 3card mel sets")

;R4
(* ?1 ?2 ?3 ?4  :parts '(1 3) 
   (?if (eq-sc? 
         '(4-27a 4-21 4-24 4-27b 4-19b 4-z15a 4-3 4-9 4-23 4-13b 4-11b 4-16a 4-14b 4-4a 4-12a 4-18a 4-5b 4-4b 4-8 4-16b
          4-14a 4-10 4-z15b 4-6 4-5a 4-11a 4-12b 4-1 4-7 4-2a 4-2b 4-13a)
         (m ?1) (m ?2) (m ?3) (m ?4))) 
   "allowed 4card mel sets")

;R5
(* ?1 ?2 ?3 ?4 ?5 :parts '(1 3) 
   (?if (eq-sc? 
           '(5-28b 5-13b 5-14a 5-33 5-26a 5-28a 5-z38b 5-9a 5-29a 5-z37 5-21b 5-30b 5-7a 5-16b 5-10a 5-23b 5-6a 5-7b 5-23a
             5-29b 5-4b 5-31b 5-2a 5-20b 5-z18a 5-4a 5-16a 5-z38a 5-9b 5-5b 5-6b 5-z12 5-20a 5-z18b 5-10b 5-14b 5-z36a 5-5a
             5-26b 5-1 5-2b 5-3b 5-3a 5-8)
           (m ?1) (m ?2) (m ?3) (m ?4) (m ?5))) 
  "allowed 5card mel sets")

;============================
;              repetion
;R6
(* ?1 :parts '(1 3) 
   (?if (let ((size 5)) (setp (m ?1 :rl size) :key #'mod12))) 
   "no pc mel repet") 

;R7
(* ?1 ?2 :parts '(1 3) 
   (?if (let ((size 7))
          (unique-cell2?  (m ?2) (m ?1) (rest (m ?2 :rl (1+ size))))))
   "no 2 cell mel repet")

;R8
(* ?1 ?2 ?3 :parts '(1 3) 
   (?if (let ((size 10)) 
          (unique-cell3?  (m ?3) (m ?2) (m ?1) (rest (m ?3 :rl (1+ size)))))) 
   "no 3 cell mel repet")

;R9
(* ?1 :parts '(1 3) 
    (?if (setp (m ?1 :rl t :l-filter #'(lambda (n) (>= (durt n) 1.0))))) 
    "no long note (>= 1 second) dups") 

;============================
;                  vlead
;R10
(* ?1 ?2 ?3 :harmony   :parts 1 
   (?if (let* ((sop1 (m ?1 :parts 1)) (sop2 (m ?2 :parts 1)) (sop3 (m ?3 :parts 1))
               (midv1 (m ?1 :parts 4)) (midv2 (m ?2 :parts 4)) (midv3 (m ?3 :parts 4)))
          (not (= (-  sop1 midv1) (- sop2 midv2) (- sop3 midv3)))))
   "no exact parallel movements between sop and midv")

;R11
(* ?1 ?2 ?3 :harmony   :parts 3
   (?if (let* ((mid1 (m ?1 :parts 4)) (mid2 (m ?2 :parts 4)) (mid3 (m ?3 :parts 4))
               (bass1 (m ?1 :parts 3)) (bass2 (m ?2 :parts 3)) (bass3 (m ?3 :parts 3)))
          (not (= (- mid1 bass1) (- mid2 bass2) (- mid3 bass3)))))
   "no exact parallel movements between midv and bass")

;R12
(* ?1 ?2 :harmony    :parts 1
  (?if (let*((p1 1) (p2 3)
             (m11 (m ?1 :parts p1)) (m12 (m ?2 :parts p1)) 
             (m21 (m ?1 :parts p2)) (m22 (m ?2 :parts p2)))
      (?incase (and m11 m12 m21 m22)
        (and (/= (mod12 m11) (mod12 m22)) 
             (/= (mod12 m12) (mod12 m21))))))
   "no mod12 cross-relation in sop/bass parts")

;R13
(* ?1 ?2 :harmony  :parts 1
   (?if (let* ((max-jump-int 1) 
               (sop1 (m ?1 :parts 1)) (sop2 (m ?2 :parts 1))       
               (bass1 (m ?1 :parts 3)) (bass2 (m ?2 :parts 3)) 
               (sop-int (- sop1 sop2)) (bass-int (- bass1 bass2)))
          (?incase (or (and (plusp bass-int) (plusp sop-int))     
                  (and (minusp bass-int) (minusp sop-int)))  
            (not (> (min (abs bass-int) (abs sop-int))  max-jump-int)))))
   "no bass-soprano jumps in same direction")

;R14
(* ?1 ?2 ?3 :harmony  :parts 1
   (?if (let* ((sop1 (m ?1 :parts 1)) (sop2 (m ?2 :parts 1)) (sop3 (m ?3 :parts 1))
               (bass1 (m ?1 :parts 3)) (bass2 (m ?2 :parts 3)) (bass3 (m ?3 :parts 3))
               (sop-int1 (- sop2 sop1)) (sop-int2 (- sop3 sop2))
               (bass-int1 (- bass2 bass1)) (bass-int2 (- bass3 bass2)))
          (not (parallel-movements? (list sop-int1 bass-int1) (list sop-int2 bass-int2)))))
   "no-3chord-parallel-movements")

;==============================
;   chords
;R15
(* ?1 :harmony  :parts 1
   (?if (let* ((sop (m ?1 :parts 1)) (mid (m ?1 :parts 4)) (bass (m ?1 :parts 3))
               (midis (list sop mid bass)))
           (and (setp midis :key #'mod12) 
                (not (eq-sc? '(3-11a 3-11b) midis)))))
   "allowed sop-midv-bass sets")


#+END_SRC 

#+BEGIN_SRC lisp
;===================================
; harmonic rules
(* ?1 :harmony
   (?if (setp (m ?1) :key #'mod12)) 
   "no unis nor octaves")

(* ?1 :harmony  :parts '(1 2)
   (?if (let* ((midis (sort< (m ?1)))
               (ints (m ?1 :data-access :harm-int)))
          (and (or (every #'(lambda (n) (member n '(1 3 7))) ints) 
                   (every #'(lambda (n) (member n '(1 3))) ints)
                   (every #'(lambda (n) (member n '(5 6))) ints))
               (not (>max-cnt-int? midis '((1 1))))
               (proper-low-reg-ch? midis)))) 
   "harm ints")

#|
; for 'unis' case: 
; replace "no unis nor octaves" and "harm ints" with following rules:

(* ?1 :harmony
   (?if (not (octaves? (m ?1))))
   "no octaves (unis allowed)")

(* ?1 :harmony :parts '(1 2)
   (?if (let* ((midis (sort< (remove-duplicates (m ?1))))
               (ints (pw::x->dx midis)))
                 (and (or (every #'(lambda (n) (member n '(1 3 7))) ints) 
                          (every #'(lambda (n) (member n '(1 3))) ints)
                          (every #'(lambda (n) (member n '(5 6))) ints))
                      (not (>max-cnt-int? midis '((1 1))))
                      (proper-low-reg-ch? midis))))
   "harm ints (unis allowed)")
|#
;====================================
; voice cross rules
(* ?1 :harmony :parts 1
  (?if (let* ((sop (m ?1 :parts 1)) (bas (m ?1 :parts 3))
              (chshigh (m ?1 :parts 2 :data-access :max)) (chslow (m ?1 :parts 2 :data-access :min)))
         (> sop chshigh chslow bas)))
 "chs betw sop and bass, sop highest")

(* ?1 :harmony :parts 2
  (?if (let* ((bas (m ?1 :parts 3)) (chsmin (m ?1 :parts 2 :data-access :min)))
         (> chsmin bas)))
 "chs higher than bass")

(* ?1 :harmony :parts 3
  (?if (let* ((bass (m ?1 :parts 3)) (mid (m ?1 :parts 4)))
         (<= bass mid)))
 "midv higher than bass")


#|
; HSG rules still missing
"find-chs?"
;----------- category
;R17
"not 3 adjacent chs with a single cat"
;----------- mel reduction (arc-lens, skyline)
; mel-red  tolerance 0 because partial solution !

;R18
"no partial arc len dups inside window"
;R19
"no skyline dups inside window and max-skyline-jump 4"
|# 

#+END_SRC
* enp preferences
** some used preferences
- non-mensural :: durations
 :DRAW-DURATIONS-P
** default global
as of [2017-06-10 Sat 11:44]

<synth-node
#+BEGIN_SRC lisp

(:PREFERENCE-INFO
 "The global ENP preferences can be edited by changing these values. The effect can be seen in scores that use global preferences. 
See ENP documentation for further details."
 :PREFERENCE-NAME
 "Global Preferences"
 :DRAW-STEMS-P
 T
 :STEM-HEIGTH
 4.0
 :SINGLE-STEM-HEIGTH
 4.0
 :DRAW-BEAMS-P
 T
 :BEAM-THICKNESS
 0.33
 :ALLOW-SINGLE-FLAGS-P
 T
 :TIE-HEIGTH
 0.5
 :DRAW-DOTS-P
 T
 :DOT-X-OFFSET-FROM-NOTE
 1.5
 :DOT-X-OFFSET-FROM-DOT
 0.5
 :DRAW-RESTS-P
 T
 :DRAW-MULTIMEASURE-RESTS-P
 NIL
 :SLUR-HEIGTH
 0.0
 :SLUR-THICKNESS
 0.75
 :DRAW-FAST-SLURS-P
 NIL
 :DRAW-MEASURE-NUMBERS-P
 T
 :DRAW-STAFF-LINES-P
 T
 :MEASURE-NUMBER-INTERVAL
 5
 :MEASURE-X-OFFSET
 1.0
 :DRAW-TUPLETS-P
 T
 :DRAW-BARLINES-P
 T
 :GRACE-NOTE-SPACING
 1.25
 :GRACE-BEAT-X-OFFSET
 1.5
 :DRAW-TIME-SIGNATURES-P
 T
 :TIME-SIGNATURE-X-OFFSET
 3.5
 :DRAW-METRONOMES-P
 T
 :ALLOW-MULTIPLE-METRONOMES-P
 NIL
 :FORCE-SHOW-METRONOMES-P
 NIL
 :BEAT-X-OFFSET
 2.0
 :CLEF-X-OFFSET
 1.5
 :DRAW-CLEFS-P
 T
 :DRAW-INSTRUMENT-NAMES-P
 T
 :DRAW-VOICE-NAMES-P
 T
 :DRAW-ALTERATIONS-P
 T
 :DRAW-EXPRESSIONS-P
 T
 :DRAW-STANDARD-EXPRESSIONS-ONLY-P
 NIL
 :DRAW-DURATIONS-P
 T
 :MIN-DRAWABLE-DURATION
 0.5
 :DRAW-PITCH-REMINDERS-P
 T
 :OPEN-NOTEHEAD-MIN-DURATION
 2.0
 :OPTIMIZE-STAFF-SYSTEMS-P
 NIL
 :USE-GLOBAL-PREFERENCES-P
 NIL
 :USE-LOCAL-PREFERENCES-P
 NIL
 :DISPLAY-TIMER-P
 NIL
 :READ-ONLY-P
 NIL
 :WINDOW-SHOW-WHEN-EVAL-P
 T)

#+END_SRC
* tips, hints and concepts
** menu box
=edit box->TITLE-FORMAT?= to get the strings to appear?
** randomness and statistics in Common Lisp
In slime-scratch, you need to explicity "make a random state"
#+BEGIN_SRC lisp
(random 10 (make-random-state T))
#+END_SRC
* looping and iterating
** dotimes
#+BEGIN_SRC lisp :results output
(dotimes (x 10) (print (random 10)))
#+END_SRC

#+RESULTS:
#+begin_example

7 
2 
7 
6 
5 
2 
0 
6 
0 
9 
#+end_example

#+BEGIN_SRC lisp

#+END_SRC
** iterating with nested mapcar
#+BEGIN_SRC lisp
(iter
  (for x from 0 to 2)
  (collect
      (mapcar #'(lambda (deep-lst)
	    (mapcar #'(lambda (lst) (nth x lst)) deep-lst))
	      '(((0 1 2) (a b c) (7 8 9) (x y z)))
	      )))
#+END_SRC

#+BEGIN_SRC lisp
(let ((pc-list '((60 64 67) (61 65 68) (62 68 69))))
  (iter
    (for x from 0 to 2)
    (collect 
	(mapcar #'(lambda (lst) (nth x lst)) '((0 1 2) (60 61 62) (61 65 68))))))
#+END_SRC

#+RESULTS:
| 0 | 60 | 61 |
| 1 | 61 | 65 |
| 2 | 62 | 68 |

* pwgl textual lisp code
** pmc and pc-set theory
To return the "prime form" in numbers
#+BEGIN_SRC lisp
(pwgl::iterate 
 (for n in (system::scs/card 3))
 (collect (prime n)))
#+END_SRC
** example of using pmc in code box
#+BEGIN_SRC lisp
   (mapcar #'(lambda (l) (sort< (append l list)))
        (pmc (make-list2 (- len (length list)) (set-difference '(0 1 2 3 4 5 6 7 8 9 10 11) list))
             '((* ?1 ?2 (?if (< ?1 ?2)) "asc"))
             :sols-mode :all))
#+END_SRC

#+BEGIN_SRC lisp
(mapcar #'(lambda (l) (sort< (append l list)))
     (pmc pcs-octs
	  :sols-mode :all))
#+END_SRC
* getting out of pwgl skunked patches with git
#+BEGIN_SRC bash
git checkout -- file.ext
#+END_SRC
* setting "tetrachords" with forte-names

#+BEGIN_SRC lisp
(setq tetrachords
'(4-1 4-2A 4-2B 4-3 4-4A 4-4B 4-5A 4-5B 4-6 4-7 4-8 4-9 4-10 4-11A
4-11B 4-12A 4-12B 4-13A 4-13B 4-14A 4-14B 4-Z15A 4-Z15B 4-16A 4-16B
4-17 4-18A 4-18B 4-19A 4-19B 4-20 4-21 4-22A 4-22B 4-23 4-24 4-25 4-26
4-27A 4-27B 4-28 4-Z29A 4-Z29B))


(setq tetrachords-quoted
'('4-1 '4-2A '4-2B '4-3 '4-4A '4-4B '4-5A '4-5B '4-6 '4-7 '4-8 '4-9 '4-10 '4-11A '4-11B '4-12A '4-12B '4-13A '4-13B '4-14A '4-14B '4-Z15A '4-Z15B '4-16A '4-16B '4-17 '4-18A '4-18B '4-19A '4-19B '4-20 '4-21 '4-22A '4-22B '4-23 '4-24 '4-25 '4-26 '4-27A '4-27B '4-28 '4-Z29A '4-Z29B))



(
('4-1 '4-2A '4-2B '4-3 '4-4A '4-4B '4-5A '4-5B '4-6 '4-7 '4-8 '4-9 '4-10 '4-11A '4-11B '4-12A '4-12B '4-13A '4-13B '4-14A '4-14B '4-Z15A '4-Z15B '4-16A '4-16B '4-17 '4-18A '4-18B '4-19A '4-19B '4-20 '4-21 '4-22A '4-22B '4-23 '4-24 '4-25 '4-26 '4-27A '4-27B '4-28 '4-Z29A '4-Z29B)
("4-1" "4-2A" "4-2B" "4-3" "4-4A" "4-4B" "4-5A" "4-5B" "4-6" "4-7" "4-8" "4-9" "4-10" "4-11A" "4-11B" "4-12A" "4-12B" "4-13A" "4-13B" "4-14A" "4-14B" "4-Z15A" "4-Z15B" "4-16A" "4-16B" "4-17" "4-18A" "4-18B" "4-19A" "4-19B" "4-20" "4-21" "4-22A" "4-22B" "4-23" "4-24" "4-25" "4-26" "4-27A" "4-27B" "4-28" "4-Z29A" "4-Z29B")
#+END_SRC

#+BEGIN_SRC lisp
(("4-1" '4-1) ("4-2A" '4-2A) ("4-2B" '4-2B) ("4-3" '4-3) ("4-4A" '4-4A) ("4-4B" '4-4B) ("4-5A" '4-5A) ("4-5B" '4-5B) ("4-6" '4-6) ("4-7" '4-7) ("4-8" '4-8) ("4-9" '4-9) ("4-10" '4-10) ("4-11A" '4-11A) ("4-11B" '4-11B) ("4-12A" '4-12A) ("4-12B" '4-12B) ("4-13A" '4-13A) ("4-13B" '4-13B) ("4-14A" '4-14A) ("4-14B" '4-14B) ("4-Z15A" '4-Z15A) ("4-Z15B" '4-Z15B) ("4-16A" '4-16A) ("4-16B" '4-16B) ("4-17" '4-17) ("4-18A" '4-18A) ("4-18B" '4-18B) ("4-19A" '4-19A) ("4-19B" '4-19B) ("4-20" '4-20) ("4-21" '4-21) ("4-22A" '4-22A) ("4-22B" '4-22B) ("4-23" '4-23) ("4-24" '4-24) ("4-25" '4-25) ("4-26" '4-26) ("4-27A" '4-27A) ("4-27B" '4-27B) ("4-28" '4-28) ("4-Z29A" '4-Z29A) ("4-Z29B" '4-Z29B))
#+END_SRC
* a reduce I was looking for without reduce
#+BEGIN_SRC lisp
(apply #'mapcar #'list '((1 2 3) (a b c)))
#+END_SRC

#+RESULTS:
| 1 | A |
| 2 | B |
| 3 | C |
* all pcsets
#+BEGIN_SRC lisp
                 (0 1 2)       3-1
                 (0 1 3)      3-2A
                 (0 2 3)      3-2B
                 (0 1 4)      3-3A
                 (0 3 4)      3-3B
                 (0 1 5)      3-4A
                 (0 4 5)      3-4B
                 (0 1 6)      3-5A
                 (0 5 6)      3-5B
                 (0 2 4)       3-6
                 (0 2 5)      3-7A
                 (0 3 5)      3-7B
                 (0 2 6)      3-8A
                 (0 4 6)      3-8B
                 (0 2 7)       3-9
                 (0 3 6)      3-10
                 (0 3 7)     3-11A
                 (0 4 7)     3-11B
                 (0 4 8)      3-12
               (0 1 2 3)       4-1
               (0 1 2 4)      4-2A
               (0 2 3 4)      4-2B
               (0 1 3 4)       4-3
               (0 1 2 5)      4-4A
               (0 3 4 5)      4-4B
               (0 1 2 6)      4-5A
               (0 4 5 6)      4-5B
               (0 1 2 7)       4-6
               (0 1 4 5)       4-7
               (0 1 5 6)       4-8
               (0 1 6 7)       4-9
               (0 2 3 5)      4-10
               (0 1 3 5)     4-11A
               (0 2 4 5)     4-11B
               (0 2 3 6)     4-12A
               (0 3 4 6)     4-12B
               (0 1 3 6)     4-13A
               (0 3 5 6)     4-13B
               (0 2 3 7)     4-14A
               (0 4 5 7)     4-14B
               (0 1 4 6)    4-Z15A
               (0 2 5 6)    4-Z15B
               (0 1 5 7)     4-16A
               (0 2 6 7)     4-16B
               (0 3 4 7)      4-17
               (0 1 4 7)     4-18A
               (0 3 6 7)     4-18B
               (0 1 4 8)     4-19A
               (0 3 4 8)     4-19B
               (0 1 5 8)      4-20
               (0 2 4 6)      4-21
               (0 2 4 7)     4-22A
               (0 3 5 7)     4-22B
               (0 2 5 7)      4-23
               (0 2 4 8)      4-24
               (0 2 6 8)      4-25
               (0 3 5 8)      4-26
               (0 2 5 8)     4-27A
               (0 3 6 8)     4-27B
               (0 3 6 9)      4-28
               (0 1 3 7)    4-Z29A
               (0 4 6 7)    4-Z29B
             (0 1 2 3 4)       5-1
             (0 1 2 3 5)      5-2A
             (0 2 3 4 5)      5-2B
             (0 1 2 4 5)      5-3A
             (0 1 3 4 5)      5-3B
             (0 1 2 3 6)      5-4A
             (0 3 4 5 6)      5-4B
             (0 1 2 3 7)      5-5A
             (0 4 5 6 7)      5-5B
             (0 1 2 5 6)      5-6A
             (0 1 4 5 6)      5-6B
             (0 1 2 6 7)      5-7A
             (0 1 5 6 7)      5-7B
             (0 2 3 4 6)       5-8
             (0 1 2 4 6)      5-9A
             (0 2 4 5 6)      5-9B
             (0 1 3 4 6)     5-10A
             (0 2 3 5 6)     5-10B
             (0 2 3 4 7)     5-11A
             (0 3 4 5 7)     5-11B
             (0 1 3 5 6)     5-Z12
             (0 1 2 4 8)     5-13A
             (0 2 3 4 8)     5-13B
             (0 1 2 5 7)     5-14A
             (0 2 5 6 7)     5-14B
             (0 1 2 6 8)      5-15
             (0 1 3 4 7)     5-16A
             (0 3 4 6 7)     5-16B
             (0 1 3 4 8)     5-Z17
             (0 1 4 5 7)    5-Z18A
             (0 2 3 6 7)    5-Z18B
             (0 1 3 6 7)     5-19A
             (0 1 4 6 7)     5-19B
             (0 1 3 7 8)     5-20A
             (0 1 5 7 8)     5-20B
             (0 1 4 5 8)     5-21A
             (0 3 4 7 8)     5-21B
             (0 1 4 7 8)      5-22
             (0 2 3 5 7)     5-23A
             (0 2 4 5 7)     5-23B
             (0 1 3 5 7)     5-24A
             (0 2 4 6 7)     5-24B
             (0 2 3 5 8)     5-25A
             (0 3 5 6 8)     5-25B
             (0 2 4 5 8)     5-26A
             (0 3 4 6 8)     5-26B
             (0 1 3 5 8)     5-27A
             (0 3 5 7 8)     5-27B
             (0 2 3 6 8)     5-28A
             (0 2 5 6 8)     5-28B
             (0 1 3 6 8)     5-29A
             (0 2 5 7 8)     5-29B
             (0 1 4 6 8)     5-30A
             (0 2 4 7 8)     5-30B
             (0 1 3 6 9)     5-31A
             (0 2 3 6 9)     5-31B
             (0 1 4 6 9)     5-32A
             (0 1 4 7 9)     5-32B
             (0 2 4 6 8)      5-33
             (0 2 4 6 9)      5-34
             (0 2 4 7 9)      5-35
             (0 1 2 4 7)    5-Z36A
             (0 3 5 6 7)    5-Z36B
             (0 3 4 5 8)     5-Z37
             (0 1 2 5 8)    5-Z38A
             (0 3 6 7 8)    5-Z38B
           (0 1 2 3 4 5)       6-1
           (0 1 2 3 4 6)      6-2A
           (0 2 3 4 5 6)      6-2B
           (0 1 2 3 5 6)     6-Z3A
           (0 1 3 4 5 6)     6-Z3B
           (0 1 2 4 5 6)      6-Z4
           (0 1 2 3 6 7)      6-5A
           (0 1 4 5 6 7)      6-5B
           (0 1 2 5 6 7)      6-Z6
           (0 1 2 6 7 8)       6-7
           (0 2 3 4 5 7)       6-8
           (0 1 2 3 5 7)      6-9A
           (0 2 4 5 6 7)      6-9B
           (0 1 3 4 5 7)    6-Z10A
           (0 2 3 4 6 7)    6-Z10B
           (0 1 2 4 5 7)    6-Z11A
           (0 2 3 5 6 7)    6-Z11B
           (0 1 2 4 6 7)    6-Z12A
           (0 1 3 5 6 7)    6-Z12B
           (0 1 3 4 6 7)     6-Z13
           (0 1 3 4 5 8)     6-14A
           (0 3 4 5 7 8)     6-14B
           (0 1 2 4 5 8)     6-15A
           (0 3 4 6 7 8)     6-15B
           (0 1 4 5 6 8)     6-16A
           (0 2 3 4 7 8)     6-16B
           (0 1 2 4 7 8)    6-Z17A
           (0 1 4 6 7 8)    6-Z17B
           (0 1 2 5 7 8)     6-18A
           (0 1 3 6 7 8)     6-18B
           (0 1 3 4 7 8)    6-Z19A
           (0 1 4 5 7 8)    6-Z19B
           (0 1 4 5 8 9)      6-20
           (0 2 3 4 6 8)     6-21A
           (0 2 4 5 6 8)     6-21B
           (0 1 2 4 6 8)     6-22A
           (0 2 4 6 7 8)     6-22B
           (0 2 3 5 6 8)     6-Z23
           (0 1 3 4 6 8)    6-Z24A
           (0 2 4 5 7 8)    6-Z24B
           (0 1 3 5 6 8)    6-Z25A
           (0 2 3 5 7 8)    6-Z25B
           (0 1 3 5 7 8)     6-Z26
           (0 1 3 4 6 9)     6-27A
           (0 2 3 5 6 9)     6-27B
           (0 1 3 5 6 9)     6-Z28
           (0 1 3 6 8 9)     6-Z29
           (0 1 3 6 7 9)     6-30A
           (0 2 3 6 8 9)     6-30B
           (0 1 3 5 8 9)     6-31A
           (0 1 4 6 8 9)     6-31B
           (0 2 4 5 7 9)      6-32
           (0 2 3 5 7 9)     6-33A
           (0 2 4 6 7 9)     6-33B
           (0 1 3 5 7 9)     6-34A
           (0 2 4 6 8 9)     6-34B
          (0 2 4 6 8 10)      6-35
           (0 1 2 3 4 7)    6-Z36A
           (0 3 4 5 6 7)    6-Z36B
           (0 1 2 3 4 8)     6-Z37
           (0 1 2 3 7 8)     6-Z38
           (0 2 3 4 5 8)    6-Z39A
           (0 3 4 5 6 8)    6-Z39B
           (0 1 2 3 5 8)    6-Z40A
           (0 3 5 6 7 8)    6-Z40B
           (0 1 2 3 6 8)    6-Z41A
           (0 2 5 6 7 8)    6-Z41B
           (0 1 2 3 6 9)     6-Z42
           (0 1 2 5 6 8)    6-Z43A
           (0 2 3 6 7 8)    6-Z43B
           (0 1 2 5 6 9)    6-Z44A
           (0 1 2 5 8 9)    6-Z44B
           (0 2 3 4 6 9)     6-Z45
           (0 1 2 4 6 9)    6-Z46A
           (0 2 4 5 6 9)    6-Z46B
           (0 1 2 4 7 9)    6-Z47A
           (0 2 3 4 7 9)    6-Z47B
           (0 1 2 5 7 9)     6-Z48
           (0 1 3 4 7 9)     6-Z49
           (0 1 4 6 7 9)     6-Z50
         (0 1 2 3 4 5 6)       7-1
         (0 1 2 3 4 5 7)      7-2A
         (0 2 3 4 5 6 7)      7-2B
         (0 1 2 3 4 5 8)      7-3A
         (0 3 4 5 6 7 8)      7-3B
         (0 1 2 3 4 6 7)      7-4A
         (0 1 3 4 5 6 7)      7-4B
         (0 1 2 3 5 6 7)      7-5A
         (0 1 2 4 5 6 7)      7-5B
         (0 1 2 3 4 7 8)      7-6A
         (0 1 4 5 6 7 8)      7-6B
         (0 1 2 3 6 7 8)      7-7A
         (0 1 2 5 6 7 8)      7-7B
         (0 2 3 4 5 6 8)       7-8
         (0 1 2 3 4 6 8)      7-9A
         (0 2 4 5 6 7 8)      7-9B
         (0 1 2 3 4 6 9)     7-10A
         (0 2 3 4 5 6 9)     7-10B
         (0 1 3 4 5 6 8)     7-11A
         (0 2 3 4 5 7 8)     7-11B
         (0 1 2 3 4 7 9)     7-Z12
         (0 1 2 4 5 6 8)     7-13A
         (0 2 3 4 6 7 8)     7-13B
         (0 1 2 3 5 7 8)     7-14A
         (0 1 3 5 6 7 8)     7-14B
         (0 1 2 4 6 7 8)      7-15
         (0 1 2 3 5 6 9)     7-16A
         (0 1 3 4 5 6 9)     7-16B
         (0 1 2 4 5 6 9)     7-Z17
         (0 1 2 3 5 8 9)    7-Z18A
         (0 1 4 6 7 8 9)    7-Z18B
         (0 1 2 3 6 7 9)     7-19A
         (0 1 2 3 6 8 9)     7-19B
         (0 1 2 4 7 8 9)     7-20A
         (0 1 2 5 7 8 9)     7-20B
         (0 1 2 4 5 8 9)     7-21A
         (0 1 3 4 5 8 9)     7-21B
         (0 1 2 5 6 8 9)      7-22
         (0 2 3 4 5 7 9)     7-23A
         (0 2 4 5 6 7 9)     7-23B
         (0 1 2 3 5 7 9)     7-24A
         (0 2 4 6 7 8 9)     7-24B
         (0 2 3 4 6 7 9)     7-25A
         (0 2 3 5 6 7 9)     7-25B
         (0 1 3 4 5 7 9)     7-26A
         (0 2 4 5 6 8 9)     7-26B
         (0 1 2 4 5 7 9)     7-27A
         (0 2 4 5 7 8 9)     7-27B
         (0 1 3 5 6 7 9)     7-28A
         (0 2 3 4 6 8 9)     7-28B
         (0 1 2 4 6 7 9)     7-29A
         (0 2 3 5 7 8 9)     7-29B
         (0 1 2 4 6 8 9)     7-30A
         (0 1 3 5 7 8 9)     7-30B
         (0 1 3 4 6 7 9)     7-31A
         (0 2 3 5 6 8 9)     7-31B
         (0 1 3 4 6 8 9)     7-32A
         (0 1 3 5 6 8 9)     7-32B
        (0 1 2 4 6 8 10)      7-33
        (0 1 3 4 6 8 10)      7-34
        (0 1 3 5 6 8 10)      7-35
         (0 1 2 3 5 6 8)    7-Z36A
         (0 2 3 5 6 7 8)    7-Z36B
         (0 1 3 4 5 7 8)     7-Z37
         (0 1 2 4 5 7 8)    7-Z38A
         (0 1 3 4 6 7 8)    7-Z38B
       (0 1 2 3 4 5 6 7)       8-1
       (0 1 2 3 4 5 6 8)      8-2A
       (0 2 3 4 5 6 7 8)      8-2B
       (0 1 2 3 4 5 6 9)       8-3
       (0 1 2 3 4 5 7 8)      8-4A
       (0 1 3 4 5 6 7 8)      8-4B
       (0 1 2 3 4 6 7 8)      8-5A
       (0 1 2 4 5 6 7 8)      8-5B
       (0 1 2 3 5 6 7 8)       8-6
       (0 1 2 3 4 5 8 9)       8-7
       (0 1 2 3 4 7 8 9)       8-8
       (0 1 2 3 6 7 8 9)       8-9
       (0 2 3 4 5 6 7 9)      8-10
       (0 1 2 3 4 5 7 9)     8-11A
       (0 2 4 5 6 7 8 9)     8-11B
       (0 1 3 4 5 6 7 9)     8-12A
       (0 2 3 4 5 6 8 9)     8-12B
       (0 1 2 3 4 6 7 9)     8-13A
       (0 2 3 5 6 7 8 9)     8-13B
       (0 1 2 4 5 6 7 9)     8-14A
       (0 2 3 4 5 7 8 9)     8-14B
       (0 1 2 3 4 6 8 9)    8-Z15A
       (0 1 3 5 6 7 8 9)    8-Z15B
       (0 1 2 3 5 7 8 9)     8-16A
       (0 1 2 4 6 7 8 9)     8-16B
       (0 1 3 4 5 6 8 9)      8-17
       (0 1 2 3 5 6 8 9)     8-18A
       (0 1 3 4 6 7 8 9)     8-18B
       (0 1 2 4 5 6 8 9)     8-19A
       (0 1 3 4 5 7 8 9)     8-19B
       (0 1 2 4 5 7 8 9)      8-20
      (0 1 2 3 4 6 8 10)      8-21
      (0 1 2 3 5 6 8 10)     8-22A
      (0 1 2 3 5 7 9 10)     8-22B
      (0 1 2 3 5 7 8 10)      8-23
      (0 1 2 4 5 6 8 10)      8-24
      (0 1 2 4 6 7 8 10)      8-25
      (0 1 2 4 5 7 9 10)      8-26
      (0 1 2 4 5 7 8 10)     8-27A
      (0 1 2 4 6 7 9 10)     8-27B
      (0 1 3 4 6 7 9 10)      8-28
       (0 1 2 3 5 6 7 9)    8-Z29A
       (0 2 3 4 6 7 8 9)    8-Z29B
     (0 1 2 3 4 5 6 7 8)       9-1
     (0 1 2 3 4 5 6 7 9)      9-2A
     (0 2 3 4 5 6 7 8 9)      9-2B
     (0 1 2 3 4 5 6 8 9)      9-3A
     (0 1 3 4 5 6 7 8 9)      9-3B
     (0 1 2 3 4 5 7 8 9)      9-4A
     (0 1 2 4 5 6 7 8 9)      9-4B
     (0 1 2 3 4 6 7 8 9)      9-5A
     (0 1 2 3 5 6 7 8 9)      9-5B
    (0 1 2 3 4 5 6 8 10)       9-6
    (0 1 2 3 4 5 7 8 10)      9-7A
    (0 1 2 3 4 5 7 9 10)      9-7B
    (0 1 2 3 4 6 7 8 10)      9-8A
    (0 1 2 3 4 6 8 9 10)      9-8B
    (0 1 2 3 5 6 7 8 10)       9-9
    (0 1 2 3 4 6 7 9 10)      9-10
    (0 1 2 3 5 6 7 9 10)     9-11A
    (0 1 2 3 5 6 8 9 10)     9-11B
    (0 1 2 4 5 6 8 9 10)      9-12
#+END_SRC
* local lisp tutorials
[[file:~/Dropbox/AB-local/Moutain%20Lion%20backups/git-projects/all-tutorials/lisp/][file:~/Dropbox/AB-local/Moutain Lion backups/git-projects/all-tutorials/lisp/]]
* file IO
** printing out
#+BEGIN_SRC lisp
(defun dot->png (fname thunk)
  (with-open-file 
      (*standard-output* fname :direction :output :if-exists :supersede) 
    (funcall thunk))
  (ext:shell (concatenate 'string "dot -Tpng -O " fname)))
#+END_SRC

#+BEGIN_SRC lisp
(with-open-file (my-stream "testfile.txt" ;;  ~/Github-repos/pwgl-chord-work/testfile.txt
			   :direction :output
			   :if-exists :supersede)
  (princ "Hello File!" my-stream))
#+END_SRC

#+BEGIN_SRC lisp
(("4-1" '4-1) ("4-2A" '4-2A) ("4-2B" '4-2B) ("4-3" '4-3) ("4-4A" '4-4A) ("4-4B" '4-4B) ("4-5A" '4-5A) ("4-5B" '4-5B) ("4-6" '4-6) ("4-7" '4-7) ("4-8" '4-8) ("4-9" '4-9) ("4-10" '4-10) ("4-11A" '4-11A) ("4-11B" '4-11B) ("4-12A" '4-12A) ("4-12B" '4-12B) ("4-13A" '4-13A) ("4-13B" '4-13B) ("4-14A" '4-14A) ("4-14B" '4-14B) ("4-Z15A" '4-Z15A) ("4-Z15B" '4-Z15B) ("4-16A" '4-16A) ("4-16B" '4-16B) ("4-17" '4-17) ("4-18A" '4-18A) ("4-18B" '4-18B) ("4-19A" '4-19A) ("4-19B" '4-19B) ("4-20" '4-20) ("4-21" '4-21) ("4-22A" '4-22A) ("4-22B" '4-22B) ("4-23" '4-23) ("4-24" '4-24) ("4-25" '4-25) ("4-26" '4-26) ("4-27A" '4-27A) ("4-27B" '4-27B) ("4-28" '4-28) ("4-Z29A" '4-Z29A) ("4-Z29B" '4-Z29B))
#+END_SRC

#+BEGIN_SRC lisp
(list '(3-1 3-2A 3-2B 3-3A 3-3B 3-4A 3-4B 3-5A 3-5B 3-6 3-7A 3-7B 3-8A 3-8B 3-9 3-10 3-11A 3-11B 3-12) '(4-1 4-2A 4-2B 4-3 4-4A 4-4B 4-5A 4-5B 4-6 4-7 4-8 4-9 4-10 4-11A 4-11B 4-12A 4-12B 4-13A 4-13B 4-14A 4-14B 4-Z15A 4-Z15B 4-16A 4-16B 4-17 4-18A 4-18B 4-19A 4-19B 4-20 4-21 4-22A 4-22B 4-23 4-24 4-25 4-26 4-27A 4-27B 4-28 4-Z29A 4-Z29B) '(5-1 5-2A 5-2B 5-3A 5-3B 5-4A 5-4B 5-5A 5-5B 5-6A 5-6B 5-7A 5-7B 5-8 5-9A 5-9B 5-10A 5-10B 5-11A 5-11B 5-Z12 5-13A 5-13B 5-14A 5-14B 5-15 5-16A 5-16B 5-Z17 5-Z18A 5-Z18B 5-19A 5-19B 5-20A 5-20B 5-21A 5-21B 5-22 5-23A 5-23B 5-24A 5-24B 5-25A 5-25B 5-26A 5-26B 5-27A 5-27B 5-28A 5-28B 5-29A 5-29B 5-30A 5-30B 5-31A 5-31B 5-32A 5-32B 5-33 5-34 5-35 5-Z36A 5-Z36B 5-Z37 5-Z38A 5-Z38B) '(6-1 6-2A 6-2B 6-Z3A 6-Z3B 6-Z4 6-5A 6-5B 6-Z6 6-7 6-8 6-9A 6-9B 6-Z10A 6-Z10B 6-Z11A 6-Z11B 6-Z12A 6-Z12B 6-Z13 6-14A 6-14B 6-15A 6-15B 6-16A 6-16B 6-Z17A 6-Z17B 6-18A 6-18B 6-Z19A 6-Z19B 6-20 6-21A 6-21B 6-22A 6-22B 6-Z23 6-Z24A 6-Z24B 6-Z25A 6-Z25B 6-Z26 6-27A 6-27B 6-Z28 6-Z29 6-30A 6-30B 6-31A 6-31B 6-32 6-33A 6-33B 6-34A 6-34B 6-35 6-Z36A 6-Z36B 6-Z37 6-Z38 6-Z39A 6-Z39B 6-Z40A 6-Z40B 6-Z41A 6-Z41B 6-Z42 6-Z43A 6-Z43B 6-Z44A 6-Z44B 6-Z45 6-Z46A 6-Z46B 6-Z47A 6-Z47B 6-Z48 6-Z49 6-Z50) '(7-1 7-2A 7-2B 7-3A 7-3B 7-4A 7-4B 7-5A 7-5B 7-6A 7-6B 7-7A 7-7B 7-8 7-9A 7-9B 7-10A 7-10B 7-11A 7-11B 7-Z12 7-13A 7-13B 7-14A 7-14B 7-15 7-16A 7-16B 7-Z17 7-Z18A 7-Z18B 7-19A 7-19B 7-20A 7-20B 7-21A 7-21B 7-22 7-23A 7-23B 7-24A 7-24B 7-25A 7-25B 7-26A 7-26B 7-27A 7-27B 7-28A 7-28B 7-29A 7-29B 7-30A 7-30B 7-31A 7-31B 7-32A 7-32B 7-33 7-34 7-35 7-Z36A 7-Z36B 7-Z37 7-Z38A 7-Z38B) '(8-1 8-2A 8-2B 8-3 8-4A 8-4B 8-5A 8-5B 8-6 8-7 8-8 8-9 8-10 8-11A 8-11B 8-12A 8-12B 8-13A 8-13B 8-14A 8-14B 8-Z15A 8-Z15B 8-16A 8-16B 8-17 8-18A 8-18B 8-19A 8-19B 8-20 8-21 8-22A 8-22B 8-23 8-24 8-25 8-26 8-27A 8-27B 8-28 8-Z29A 8-Z29B) '(9-1 9-2A 9-2B 9-3A 9-3B 9-4A 9-4B 9-5A 9-5B 9-6 9-7A 9-7B 9-8A 9-8B 9-9 9-10 9-11A 9-11B 9-12) '(10-1 10-2 10-3 10-4 10-5 10-6) '(11-1) )

#+END_SRC

#+RESULTS:
|  3-1 | 3-2A | 3-2B | 3-3A  | 3-3B  | 3-4A | 3-4B | 3-5A | 3-5B |  3-6 | 3-7A | 3-7B | 3-8A | 3-8B   | 3-9    | 3-10   | 3-11A  | 3-11B  | 3-12   |       |       |        |        |       |       |       |        |        |       |        |        |        |       |       |       |       |       |       |        |        |        |        |        |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
|  4-1 | 4-2A | 4-2B | 4-3   | 4-4A  | 4-4B | 4-5A | 4-5B | 4-6  |  4-7 | 4-8  | 4-9  | 4-10 | 4-11A  | 4-11B  | 4-12A  | 4-12B  | 4-13A  | 4-13B  | 4-14A | 4-14B | 4-Z15A | 4-Z15B | 4-16A | 4-16B |  4-17 | 4-18A  | 4-18B  | 4-19A | 4-19B  | 4-20   | 4-21   | 4-22A | 4-22B | 4-23  | 4-24  | 4-25  |  4-26 | 4-27A  | 4-27B  | 4-28   | 4-Z29A | 4-Z29B |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
|  5-1 | 5-2A | 5-2B | 5-3A  | 5-3B  | 5-4A | 5-4B | 5-5A | 5-5B | 5-6A | 5-6B | 5-7A | 5-7B | 5-8    | 5-9A   | 5-9B   | 5-10A  | 5-10B  | 5-11A  | 5-11B | 5-Z12 | 5-13A  | 5-13B  | 5-14A | 5-14B |  5-15 | 5-16A  | 5-16B  | 5-Z17 | 5-Z18A | 5-Z18B | 5-19A  | 5-19B | 5-20A | 5-20B | 5-21A | 5-21B |  5-22 | 5-23A  | 5-23B  | 5-24A  | 5-24B  | 5-25A  | 5-25B | 5-26A | 5-26B | 5-27A | 5-27B | 5-28A | 5-28B | 5-29A | 5-29B | 5-30A | 5-30B | 5-31A | 5-31B | 5-32A | 5-32B  |   5-33 |  5-34 |  5-35 | 5-Z36A | 5-Z36B | 5-Z37  | 5-Z38A | 5-Z38B |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
|  6-1 | 6-2A | 6-2B | 6-Z3A | 6-Z3B | 6-Z4 | 6-5A | 6-5B | 6-Z6 |  6-7 | 6-8  | 6-9A | 6-9B | 6-Z10A | 6-Z10B | 6-Z11A | 6-Z11B | 6-Z12A | 6-Z12B | 6-Z13 | 6-14A | 6-14B  | 6-15A  | 6-15B | 6-16A | 6-16B | 6-Z17A | 6-Z17B | 6-18A | 6-18B  | 6-Z19A | 6-Z19B | 6-20  | 6-21A | 6-21B | 6-22A | 6-22B | 6-Z23 | 6-Z24A | 6-Z24B | 6-Z25A | 6-Z25B | 6-Z26  | 6-27A | 6-27B | 6-Z28 | 6-Z29 | 6-30A | 6-30B | 6-31A | 6-31B | 6-32  | 6-33A | 6-33B | 6-34A | 6-34B | 6-35  | 6-Z36A | 6-Z36B | 6-Z37 | 6-Z38 | 6-Z39A | 6-Z39B | 6-Z40A | 6-Z40B | 6-Z41A | 6-Z41B | 6-Z42 | 6-Z43A | 6-Z43B | 6-Z44A | 6-Z44B | 6-Z45 | 6-Z46A | 6-Z46B | 6-Z47A | 6-Z47B | 6-Z48 | 6-Z49 | 6-Z50 |
|  7-1 | 7-2A | 7-2B | 7-3A  | 7-3B  | 7-4A | 7-4B | 7-5A | 7-5B | 7-6A | 7-6B | 7-7A | 7-7B | 7-8    | 7-9A   | 7-9B   | 7-10A  | 7-10B  | 7-11A  | 7-11B | 7-Z12 | 7-13A  | 7-13B  | 7-14A | 7-14B |  7-15 | 7-16A  | 7-16B  | 7-Z17 | 7-Z18A | 7-Z18B | 7-19A  | 7-19B | 7-20A | 7-20B | 7-21A | 7-21B |  7-22 | 7-23A  | 7-23B  | 7-24A  | 7-24B  | 7-25A  | 7-25B | 7-26A | 7-26B | 7-27A | 7-27B | 7-28A | 7-28B | 7-29A | 7-29B | 7-30A | 7-30B | 7-31A | 7-31B | 7-32A | 7-32B  |   7-33 |  7-34 |  7-35 | 7-Z36A | 7-Z36B | 7-Z37  | 7-Z38A | 7-Z38B |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
|  8-1 | 8-2A | 8-2B | 8-3   | 8-4A  | 8-4B | 8-5A | 8-5B | 8-6  |  8-7 | 8-8  | 8-9  | 8-10 | 8-11A  | 8-11B  | 8-12A  | 8-12B  | 8-13A  | 8-13B  | 8-14A | 8-14B | 8-Z15A | 8-Z15B | 8-16A | 8-16B |  8-17 | 8-18A  | 8-18B  | 8-19A | 8-19B  | 8-20   | 8-21   | 8-22A | 8-22B | 8-23  | 8-24  | 8-25  |  8-26 | 8-27A  | 8-27B  | 8-28   | 8-Z29A | 8-Z29B |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
|  9-1 | 9-2A | 9-2B | 9-3A  | 9-3B  | 9-4A | 9-4B | 9-5A | 9-5B |  9-6 | 9-7A | 9-7B | 9-8A | 9-8B   | 9-9    | 9-10   | 9-11A  | 9-11B  | 9-12   |       |       |        |        |       |       |       |        |        |       |        |        |        |       |       |       |       |       |       |        |        |        |        |        |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
| 10-1 | 10-2 | 10-3 | 10-4  | 10-5  | 10-6 |      |      |      |      |      |      |      |        |        |        |        |        |        |       |       |        |        |       |       |       |        |        |       |        |        |        |       |       |       |       |       |       |        |        |        |        |        |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
| 11-1 |      |      |       |       |      |      |      |      |      |      |      |      |        |        |        |        |        |        |       |       |        |        |       |       |       |        |        |       |        |        |        |       |       |       |       |       |       |        |        |        |        |        |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |

#+BEGIN_SRC lisp
(setq all-pcsets (list '(3-1 3-2A 3-2B 3-3A 3-3B 3-4A 3-4B 3-5A 3-5B 3-6 3-7A 3-7B 3-8A 3-8B 3-9 3-10 3-11A 3-11B 3-12) '(4-1 4-2A 4-2B 4-3 4-4A 4-4B 4-5A 4-5B 4-6 4-7 4-8 4-9 4-10 4-11A 4-11B 4-12A 4-12B 4-13A 4-13B 4-14A 4-14B 4-Z15A 4-Z15B 4-16A 4-16B 4-17 4-18A 4-18B 4-19A 4-19B 4-20 4-21 4-22A 4-22B 4-23 4-24 4-25 4-26 4-27A 4-27B 4-28 4-Z29A 4-Z29B) '(5-1 5-2A 5-2B 5-3A 5-3B 5-4A 5-4B 5-5A 5-5B 5-6A 5-6B 5-7A 5-7B 5-8 5-9A 5-9B 5-10A 5-10B 5-11A 5-11B 5-Z12 5-13A 5-13B 5-14A 5-14B 5-15 5-16A 5-16B 5-Z17 5-Z18A 5-Z18B 5-19A 5-19B 5-20A 5-20B 5-21A 5-21B 5-22 5-23A 5-23B 5-24A 5-24B 5-25A 5-25B 5-26A 5-26B 5-27A 5-27B 5-28A 5-28B 5-29A 5-29B 5-30A 5-30B 5-31A 5-31B 5-32A 5-32B 5-33 5-34 5-35 5-Z36A 5-Z36B 5-Z37 5-Z38A 5-Z38B) '(6-1 6-2A 6-2B 6-Z3A 6-Z3B 6-Z4 6-5A 6-5B 6-Z6 6-7 6-8 6-9A 6-9B 6-Z10A 6-Z10B 6-Z11A 6-Z11B 6-Z12A 6-Z12B 6-Z13 6-14A 6-14B 6-15A 6-15B 6-16A 6-16B 6-Z17A 6-Z17B 6-18A 6-18B 6-Z19A 6-Z19B 6-20 6-21A 6-21B 6-22A 6-22B 6-Z23 6-Z24A 6-Z24B 6-Z25A 6-Z25B 6-Z26 6-27A 6-27B 6-Z28 6-Z29 6-30A 6-30B 6-31A 6-31B 6-32 6-33A 6-33B 6-34A 6-34B 6-35 6-Z36A 6-Z36B 6-Z37 6-Z38 6-Z39A 6-Z39B 6-Z40A 6-Z40B 6-Z41A 6-Z41B 6-Z42 6-Z43A 6-Z43B 6-Z44A 6-Z44B 6-Z45 6-Z46A 6-Z46B 6-Z47A 6-Z47B 6-Z48 6-Z49 6-Z50) '(7-1 7-2A 7-2B 7-3A 7-3B 7-4A 7-4B 7-5A 7-5B 7-6A 7-6B 7-7A 7-7B 7-8 7-9A 7-9B 7-10A 7-10B 7-11A 7-11B 7-Z12 7-13A 7-13B 7-14A 7-14B 7-15 7-16A 7-16B 7-Z17 7-Z18A 7-Z18B 7-19A 7-19B 7-20A 7-20B 7-21A 7-21B 7-22 7-23A 7-23B 7-24A 7-24B 7-25A 7-25B 7-26A 7-26B 7-27A 7-27B 7-28A 7-28B 7-29A 7-29B 7-30A 7-30B 7-31A 7-31B 7-32A 7-32B 7-33 7-34 7-35 7-Z36A 7-Z36B 7-Z37 7-Z38A 7-Z38B) '(8-1 8-2A 8-2B 8-3 8-4A 8-4B 8-5A 8-5B 8-6 8-7 8-8 8-9 8-10 8-11A 8-11B 8-12A 8-12B 8-13A 8-13B 8-14A 8-14B 8-Z15A 8-Z15B 8-16A 8-16B 8-17 8-18A 8-18B 8-19A 8-19B 8-20 8-21 8-22A 8-22B 8-23 8-24 8-25 8-26 8-27A 8-27B 8-28 8-Z29A 8-Z29B) '(9-1 9-2A 9-2B 9-3A 9-3B 9-4A 9-4B 9-5A 9-5B 9-6 9-7A 9-7B 9-8A 9-8B 9-9 9-10 9-11A 9-11B 9-12) '(10-1 10-2 10-3 10-4 10-5 10-6) '(11-1) ))

#+END_SRC

#+RESULTS:
|  3-1 | 3-2A | 3-2B | 3-3A  | 3-3B  | 3-4A | 3-4B | 3-5A | 3-5B |  3-6 | 3-7A | 3-7B | 3-8A | 3-8B   | 3-9    | 3-10   | 3-11A  | 3-11B  | 3-12   |       |       |        |        |       |       |       |        |        |       |        |        |        |       |       |       |       |       |       |        |        |        |        |        |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
|  4-1 | 4-2A | 4-2B | 4-3   | 4-4A  | 4-4B | 4-5A | 4-5B | 4-6  |  4-7 | 4-8  | 4-9  | 4-10 | 4-11A  | 4-11B  | 4-12A  | 4-12B  | 4-13A  | 4-13B  | 4-14A | 4-14B | 4-Z15A | 4-Z15B | 4-16A | 4-16B |  4-17 | 4-18A  | 4-18B  | 4-19A | 4-19B  | 4-20   | 4-21   | 4-22A | 4-22B | 4-23  | 4-24  | 4-25  |  4-26 | 4-27A  | 4-27B  | 4-28   | 4-Z29A | 4-Z29B |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
|  5-1 | 5-2A | 5-2B | 5-3A  | 5-3B  | 5-4A | 5-4B | 5-5A | 5-5B | 5-6A | 5-6B | 5-7A | 5-7B | 5-8    | 5-9A   | 5-9B   | 5-10A  | 5-10B  | 5-11A  | 5-11B | 5-Z12 | 5-13A  | 5-13B  | 5-14A | 5-14B |  5-15 | 5-16A  | 5-16B  | 5-Z17 | 5-Z18A | 5-Z18B | 5-19A  | 5-19B | 5-20A | 5-20B | 5-21A | 5-21B |  5-22 | 5-23A  | 5-23B  | 5-24A  | 5-24B  | 5-25A  | 5-25B | 5-26A | 5-26B | 5-27A | 5-27B | 5-28A | 5-28B | 5-29A | 5-29B | 5-30A | 5-30B | 5-31A | 5-31B | 5-32A | 5-32B  |   5-33 |  5-34 |  5-35 | 5-Z36A | 5-Z36B | 5-Z37  | 5-Z38A | 5-Z38B |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
|  6-1 | 6-2A | 6-2B | 6-Z3A | 6-Z3B | 6-Z4 | 6-5A | 6-5B | 6-Z6 |  6-7 | 6-8  | 6-9A | 6-9B | 6-Z10A | 6-Z10B | 6-Z11A | 6-Z11B | 6-Z12A | 6-Z12B | 6-Z13 | 6-14A | 6-14B  | 6-15A  | 6-15B | 6-16A | 6-16B | 6-Z17A | 6-Z17B | 6-18A | 6-18B  | 6-Z19A | 6-Z19B | 6-20  | 6-21A | 6-21B | 6-22A | 6-22B | 6-Z23 | 6-Z24A | 6-Z24B | 6-Z25A | 6-Z25B | 6-Z26  | 6-27A | 6-27B | 6-Z28 | 6-Z29 | 6-30A | 6-30B | 6-31A | 6-31B | 6-32  | 6-33A | 6-33B | 6-34A | 6-34B | 6-35  | 6-Z36A | 6-Z36B | 6-Z37 | 6-Z38 | 6-Z39A | 6-Z39B | 6-Z40A | 6-Z40B | 6-Z41A | 6-Z41B | 6-Z42 | 6-Z43A | 6-Z43B | 6-Z44A | 6-Z44B | 6-Z45 | 6-Z46A | 6-Z46B | 6-Z47A | 6-Z47B | 6-Z48 | 6-Z49 | 6-Z50 |
|  7-1 | 7-2A | 7-2B | 7-3A  | 7-3B  | 7-4A | 7-4B | 7-5A | 7-5B | 7-6A | 7-6B | 7-7A | 7-7B | 7-8    | 7-9A   | 7-9B   | 7-10A  | 7-10B  | 7-11A  | 7-11B | 7-Z12 | 7-13A  | 7-13B  | 7-14A | 7-14B |  7-15 | 7-16A  | 7-16B  | 7-Z17 | 7-Z18A | 7-Z18B | 7-19A  | 7-19B | 7-20A | 7-20B | 7-21A | 7-21B |  7-22 | 7-23A  | 7-23B  | 7-24A  | 7-24B  | 7-25A  | 7-25B | 7-26A | 7-26B | 7-27A | 7-27B | 7-28A | 7-28B | 7-29A | 7-29B | 7-30A | 7-30B | 7-31A | 7-31B | 7-32A | 7-32B  |   7-33 |  7-34 |  7-35 | 7-Z36A | 7-Z36B | 7-Z37  | 7-Z38A | 7-Z38B |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
|  8-1 | 8-2A | 8-2B | 8-3   | 8-4A  | 8-4B | 8-5A | 8-5B | 8-6  |  8-7 | 8-8  | 8-9  | 8-10 | 8-11A  | 8-11B  | 8-12A  | 8-12B  | 8-13A  | 8-13B  | 8-14A | 8-14B | 8-Z15A | 8-Z15B | 8-16A | 8-16B |  8-17 | 8-18A  | 8-18B  | 8-19A | 8-19B  | 8-20   | 8-21   | 8-22A | 8-22B | 8-23  | 8-24  | 8-25  |  8-26 | 8-27A  | 8-27B  | 8-28   | 8-Z29A | 8-Z29B |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
|  9-1 | 9-2A | 9-2B | 9-3A  | 9-3B  | 9-4A | 9-4B | 9-5A | 9-5B |  9-6 | 9-7A | 9-7B | 9-8A | 9-8B   | 9-9    | 9-10   | 9-11A  | 9-11B  | 9-12   |       |       |        |        |       |       |       |        |        |       |        |        |        |       |       |       |       |       |       |        |        |        |        |        |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
| 10-1 | 10-2 | 10-3 | 10-4  | 10-5  | 10-6 |      |      |      |      |      |      |      |        |        |        |        |        |        |       |       |        |        |       |       |       |        |        |       |        |        |        |       |       |       |       |       |       |        |        |        |        |        |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
| 11-1 |      |      |       |       |      |      |      |      |      |      |      |      |        |        |        |        |        |        |       |       |        |        |       |       |       |        |        |       |        |        |        |       |       |       |       |       |       |        |        |        |        |        |       |       |       |       |       |       |       |       |       |       |       |       |       |       |        |        |       |       |        |        |        |        |        |        |       |        |        |        |        |       |        |        |        |        |       |       |       |
** reading in
From Land-of-lisp
#+BEGIN_SRC lisp
(with-open-file ( my-stream "data.txt" :direction :output) (print "my data" my-stream))
(with-open-file (my-stream "data.txt" :direction :input) (read my-stream)) 
"my data"
#+END_SRC
** for pwgl
#+BEGIN_SRC lisp
(with-open-file (my-stream "data2.txt" :direction :output :if-exists :supersede) (format my-stream "~a" '((0 1 2) (0 1 3))))

(setq data-stream (with-open-file (my-stream "data2.txt" :direction :input) (read my-stream)))
#+END_SRC
* long list of pitch classes
#+BEGIN_SRC lisp
(0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
#+END_SRC

#+BEGIN_SRC lisp
(36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72)
#+END_SRC

#+BEGIN_SRC lisp
(48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72)
#+END_SRC

#+BEGIN_SRC lisp
(62 63 64 65 66 67 68 69 70 71)
#+END_SRC
* iterate and dotimes
#+BEGIN_SRC lisp
(let ((acc ())) (dotimes (x 4 acc) (push (loop for x from 0 to 3 collect x) acc)))
#+END_SRC
* add to 4 groups
#+BEGIN_SRC lisp
((3 1 0 0) (3 0 1 0) (3 0 0 1) (2 2 0 0) (2 1 1 0) (2 1 0 1) (2 0 2 0) (2 0 1 1) (2 0 0 2) (1 3 0 0) (1 2 1 0) (1 2 0 1) (1 1 2 0) (1 1 1 1) (1 1 0 2) (1 0 3 0) (1 0 2 1) (1 0 1 2) (1 0 0 3) (0 3 1 0) (0 3 0 1) (0 2 2 0) (0 2 1 1) (0 2 0 2) (0 1 3 0) (0 1 2 1) (0 1 1 2) (0 1 0 3) (0 0 3 1) (0 0 2 2) (0 0 1 3))
#+END_SRC

#+BEGIN_SRC lisp
((3 3 -1 -1) (3 1 1 -1) (3 1 -1 1) (3 -1 3 -1) (3 -1 1 1) (3 -1 -1 3) (2 2 1 -1) (2 2 -1 1) (2 1 2 -1) (2 1 -1 2) (2 -1 2 1) (2 -1 1 2) (1 3 1 -1) (1 3 -1 1) (1 2 2 -1) (1 2 -1 2) (1 1 3 -1) (1 1 1 1) (1 1 -1 3) (1 -1 3 1) (1 -1 2 2) (1 -1 1 3) (-1 3 3 -1) (-1 3 1 1) (-1 3 -1 3) (-1 2 2 1) (-1 2 1 2) (-1 1 3 1) (-1 1 2 2) (-1 1 1 3) (-1 -1 3 3)))

#+END_SRC
* find examples
** find . -maxdepth 1 -not -type d
#+BEGIN_SRC bash
find . -maxdepth 1 -not -type d
#+END_SRC

#+RESULTS:
| ./#readme.org#       |
| ./.DS_Store          |
| ./.gitignore         |
| ./problem-code.lisp~ |
| ./problem2.lisp~     |
| ./readme.org         |
| ./readme.org~        |
** find . \( -iname \*\\.pwgl\* \) -ls
#+BEGIN_SRC bash
find . \( -iname \*\\.pwgl\* \) -ls

#+END_SRC

#+RESULTS:
| 17167399 |    96 | -rw-r--r-- | 1 | a | staff |   47779 | Jun | 15 | 10:32 | ./2017-06-13/daily-pc-set-example.pwgl                             |
| 17172865 |    16 | -rw-r--r-- | 1 | a | staff |    8023 | Jun | 23 | 17:39 | ./2017-06-13/trichord-pcset-slider.pwgl                            |
| 17173922 |   360 | -rw-r--r-- | 1 | a | staff |  181554 | Jun | 14 | 05:49 | ./2017-06-13/use-code-boxes-for-pcs.pwgl                           |
| 17174549 |   272 | -rw-r--r-- | 1 | a | staff |  135458 | Jun | 15 | 12:55 | ./2017-06-14/permute-all-tn-octaves-of-cardinality.pwgl            |
| 17184069 |   216 | -rw-r--r-- | 1 | a | staff |  109961 | Jun | 15 | 12:34 | ./2017-06-15/add-velocity-to-score-templates.pwgl                  |
| 17185126 |   176 | -rw-r--r-- | 1 | a | staff |   89432 | Jun | 15 | 16:22 | ./2017-06-15/best-way-to-move-long-non-mensural.pwgl               |
| 17184649 |   184 | -rw-r--r-- | 1 | a | staff |   90589 | Jun | 15 | 21:28 | ./2017-06-15/document-this-ultimate-pcset-listener.pwgl            |
| 17185871 |   280 | -rw-r--r-- | 1 | a | staff |  141787 | Jun | 15 | 16:22 | ./2017-06-15/many-map-enums-with-score-editors.pwgl                |
| 17187929 |    80 | -rw-r--r-- | 1 | a | staff |   37914 | Jun | 15 | 21:28 | ./2017-06-15/map-chords-to-voices.pwgl                             |
| 17184496 |   104 | -rw-r--r-- | 1 | a | staff |   50754 | Jun | 15 | 12:57 | ./2017-06-15/simpler-gentler-random-trichord-template.pwgl         |
| 17188157 |   472 | -rw-r--r-- | 1 | a | staff |  238923 | Jun | 16 | 17:13 | ./2017-06-15/ultimate-three-part-pc-harmonies.pwgl                 |
| 17192091 |    40 | -rw-r--r-- | 1 | a | staff |   18289 | Jun | 16 | 21:14 | ./2017-06-16/choosing-equals-pcset-with-multiscore.pwgl            |
| 17193167 |   120 | -rw-r--r-- | 1 | a | staff |   58394 | Jun | 18 | 21:47 | ./2017-06-16/formatting-set-printouts.pwgl                         |
| 17189228 | 10768 | -rw-r--r-- | 1 | a | staff | 5509698 | Jun | 16 | 17:13 | ./2017-06-16/manipulating-sc4-10-score.pwgl                        |
| 17211098 |    56 | -rw-r--r-- | 1 | a | staff |   28503 | Jun | 18 | 23:20 | ./2017-06-18/collecting-all-multiscore-pmc-rules-in-a-measure.pwgl |
| 17215701 |    96 | -rw-r--r-- | 1 | a | staff |   45611 | Jun | 19 | 18:49 | ./2017-06-19/formatting-and-writing-out-to-file.pwgl               |
| 17217161 |   144 | -rw-r--r-- | 1 | a | staff |   72349 | Jun | 19 | 23:41 | ./2017-06-19/no-adjacent-chord-dups-with-single-pcset.pwgl         |
| 17216643 |    40 | -rw-r--r-- | 1 | a | staff |   18175 | Jun | 19 | 19:05 | ./2017-06-19/openGL-text-macros.pwgl                               |
| 17216925 |    88 | -rw-r--r-- | 1 | a | staff |   40967 | Jun | 19 | 19:18 | ./2017-06-19/simplified-by-set-pmc-searchspace.pwgl                |
| 17217876 |    64 | -rw-r--r-- | 1 | a | staff |   29980 | Jun | 19 | 22:35 | ./2017-06-19/understanding-BPFs-and-interpolation.pwgl             |
| 17220191 |    32 | -rw-r--r-- | 1 | a | staff |   16192 | Jun | 22 | 09:43 | ./2017-06-20/alea-and-breakpoint-functions.pwgl                    |
| 17229060 |     8 | -rw-r--r-- | 1 | a | staff |     275 | Jun | 22 | 10:22 | ./2017-06-22/#empty-pwgl-patch.pwgl#                               |
| 17232063 |     8 | -rw-r--r-- | 1 | a | staff |     635 | Jun | 23 | 06:01 | ./2017-06-22/abstraction-box.pwgl                                  |
| 17229121 |     8 | -rw-r--r-- | 1 | a | staff |    1536 | Jun | 22 | 10:28 | ./2017-06-22/chord-editor.pwgl                                     |
| 17229068 |     8 | -rw-r--r-- | 1 | a | staff |     579 | Jun | 22 | 10:24 | ./2017-06-22/code-box.pwgl                                         |
| 17229057 |     8 | -rw-r--r-- | 1 | a | staff |     275 | Jun | 22 | 10:20 | ./2017-06-22/empty-pwgl-patch.pwgl                                 |
| 17229087 |     8 | -rw-r--r-- | 1 | a | staff |    1083 | Jun | 22 | 10:25 | ./2017-06-22/enp-constructor.pwgl                                  |
| 17229091 |     8 | -rw-r--r-- | 1 | a | staff |    1049 | Jun | 22 | 10:25 | ./2017-06-22/enp-score-notation.pwgl                               |
| 17229099 |     8 | -rw-r--r-- | 1 | a | staff |    1065 | Jun | 22 | 10:27 | ./2017-06-22/enp-script.pwgl                                       |
| 17229062 |     8 | -rw-r--r-- | 1 | a | staff |     838 | Jun | 22 | 10:22 | ./2017-06-22/lisp-code-box.pwgl                                    |
| 17229123 |     8 | -rw-r--r-- | 1 | a | staff |    1949 | Jun | 22 | 10:29 | ./2017-06-22/map-enum.pwgl                                         |
| 17229093 |     8 | -rw-r--r-- | 1 | a | staff |    2093 | Jun | 22 | 10:26 | ./2017-06-22/multi-pmc.pwgl                                        |
| 17229096 |     8 | -rw-r--r-- | 1 | a | staff |    2590 | Jun | 22 | 10:26 | ./2017-06-22/multi-score-pmc.pwgl                                  |
| 17229119 |     8 | -rw-r--r-- | 1 | a | staff |    1042 | Jun | 22 | 10:28 | ./2017-06-22/sc-info.pwgl                                          |
| 17229083 |     8 | -rw-r--r-- | 1 | a | staff |    2575 | Jun | 22 | 10:24 | ./2017-06-22/score-editor.pwgl                                     |
| 17229116 |     8 | -rw-r--r-- | 1 | a | staff |     751 | Jun | 22 | 10:27 | ./2017-06-22/scs-card.pwgl                                         |
| 17229065 |     8 | -rw-r--r-- | 1 | a | staff |     854 | Jun | 22 | 10:24 | ./2017-06-22/text-box.pwgl                                         |
| 17311534 |    72 | -rw-r--r-- | 1 | a | staff |   34117 | Jun | 25 | 14:21 | ./2017-06-23/enumerate-beats-to-measures-to-voices.pwgl            |
| 17309564 |    64 | -rw-r--r-- | 1 | a | staff |   29443 | Jun | 25 | 14:21 | ./2017-06-23/four-four-beats-and-three-eight-measures.pwgl         |
| 17313499 |    64 | -rw-r--r-- | 1 | a | staff |   31547 | Jun | 25 | 14:21 | ./2017-06-24/iterate-your-own-beat-constructor.pwgl                |
| 17324321 |    48 | -rw-r--r-- | 1 | a | staff |   23345 | Jun | 25 | 14:38 | ./2017-06-25/translate-three-pulses-code-to-rtm.pwgl               |
| 17075499 |  1160 | -rw-r--r-- | 1 | a | staff |  593379 | Dec | 18 |  2013 | ./large/MUSC7911.pwgl                                              |
| 17062710 |    16 | -rw-r--r-- | 1 | a | staff |    7719 | Jun |  8 | 19:31 | ./miscellaneous/2017-06-08/basic-pwgl-abstraction-as-lisp.pwgl     |
| 17052675 |  1344 | -rw-r--r-- | 1 | a | staff |  685847 | Jun |  8 | 21:03 | ./miscellaneous/2017-06-08/blank.pwgl                              |
| 17062724 |    16 | -rw-r--r-- | 1 | a | staff |    7842 | Jun |  8 | 19:31 | ./miscellaneous/2017-06-08/constructing-beats-and-measures2.pwgl   |
| 17062704 |   120 | -rw-r--r-- | 1 | a | staff |   58243 | Jun |  8 | 20:38 | ./miscellaneous/2017-06-08/generating-basic-RTMs.pwgl              |
| 17062835 |   104 | -rw-r--r-- | 1 | a | staff |   49687 | Jun |  8 | 20:16 | ./miscellaneous/2017-06-08/generating-basic-RTMs2.pwgl             |
| 17067177 |     8 | -rw-r--r-- | 1 | a | staff |     278 | Jun |  9 | 16:12 | ./miscellaneous/2017-06-09/load-an-abstraction-maybe.pwgl          |
| 17065037 |    64 | -rw-r--r-- | 1 | a | staff |   32608 | Jun |  9 | 14:18 | ./miscellaneous/2017-06-09/master-pc-sets-list.pwgl                |
| 17063150 |   136 | -rw-r--r-- | 1 | a | staff |   68828 | Jun |  9 | 08:52 | ./miscellaneous/2017-06-09/reassigning-pitches-with-RTMs.pwgl      |
| 17067527 |   472 | -rw-r--r-- | 1 | a | staff |  240798 | Jun |  9 | 19:33 | ./miscellaneous/2017-06-09/sc-info-code-in-blocks.pwgl             |
| 17066472 |    96 | -rw-r--r-- | 1 | a | staff |   45443 | Jun | 10 | 06:15 | ./miscellaneous/2017-06-10/arpeggio-sets-experiment.pwgl           |
| 17075733 |   248 | -rw-r--r-- | 1 | a | staff |  126205 | Jun | 10 | 14:23 | ./miscellaneous/2017-06-10/developing-variance.pwgl                |
| 17071928 |   120 | -rw-r--r-- | 1 | a | staff |   57913 | Jun | 10 | 21:23 | ./miscellaneous/2017-06-10/filtering-sc-info.pwgl                  |
| 17075463 |   184 | -rw-r--r-- | 1 | a | staff |   90673 | Jun | 10 | 21:23 | ./miscellaneous/2017-06-10/four-parts-as-chords.pwgl               |
| 17071365 |    96 | -rw-r--r-- | 1 | a | staff |   47554 | Jun | 10 | 06:14 | ./miscellaneous/2017-06-10/generate-triadic-hexachords.pwgl        |
| 17075731 |    56 | -rw-r--r-- | 1 | a | staff |   26891 | Jun | 10 | 14:22 | ./miscellaneous/2017-06-10/IFUNC-patching.pwgl                     |
| 17075706 |   328 | -rw-r--r-- | 1 | a | staff |  166803 | Jun | 10 | 14:44 | ./miscellaneous/2017-06-10/PMC-tetrachords-7911.pwgl               |
| 17071734 |    72 | -rw-r--r-- | 1 | a | staff |   34211 | Jun | 10 | 08:46 | ./miscellaneous/2017-06-10/score-harmony-scripting.pwgl            |
| 17075711 |   128 | -rw-r--r-- | 1 | a | staff |   63689 | Jun | 10 | 14:23 | ./miscellaneous/2017-06-10/two-chord-phrase-7911.pwgl              |
| 17075708 |   424 | -rw-r--r-- | 1 | a | staff |  215973 | Jun | 10 | 14:23 | ./miscellaneous/2017-06-10/voiced-hexachords-7911.pwgl             |
| 17066086 |    40 | -rw-r--r-- | 1 | a | staff |   18211 | Jun | 25 | 14:38 | ./most-useful-abstractions/set-choice-abstraction.pwgl             |
** find . -type f -name "*.org" -exec ls \{\} . \;
#+BEGIN_SRC bash
find . -type f -name "*.org" -exec ls \{\} . \;
#+END_SRC

#+RESULTS:
|     ./2017-06-13/README.org |
|                             |
|                          .: |
|                #readme.org# |
|                  2017-06-13 |
|                  2017-06-14 |
|                  2017-06-15 |
|                  2017-06-16 |
|                  2017-06-18 |
|                  2017-06-19 |
|                  2017-06-20 |
|                  2017-06-22 |
|                  2017-06-23 |
|                  2017-06-24 |
|                  2017-06-25 |
|                       large |
|               miscellaneous |
|    most-useful-abstractions |
|          problem-code.lisp~ |
|              problem2.lisp~ |
|                pwgl-as-lisp |
|                  readme.org |
|                 readme.org~ |
| ./2017-06-22/PWGL-boxes.org |
|                             |
|                          .: |
|                #readme.org# |
|                  2017-06-13 |
|                  2017-06-14 |
|                  2017-06-15 |
|                  2017-06-16 |
|                  2017-06-18 |
|                  2017-06-19 |
|                  2017-06-20 |
|                  2017-06-22 |
|                  2017-06-23 |
|                  2017-06-24 |
|                  2017-06-25 |
|                       large |
|               miscellaneous |
|    most-useful-abstractions |
|          problem-code.lisp~ |
|              problem2.lisp~ |
|                pwgl-as-lisp |
|                  readme.org |
|                 readme.org~ |
|                ./readme.org |
|                             |
|                          .: |
|                #readme.org# |
|                  2017-06-13 |
|                  2017-06-14 |
|                  2017-06-15 |
|                  2017-06-16 |
|                  2017-06-18 |
|                  2017-06-19 |
|                  2017-06-20 |
|                  2017-06-22 |
|                  2017-06-23 |
|                  2017-06-24 |
|                  2017-06-25 |
|                       large |
|               miscellaneous |
|    most-useful-abstractions |
|          problem-code.lisp~ |
|              problem2.lisp~ |
|                pwgl-as-lisp |
|                  readme.org |
|                 readme.org~ |
** find . -name "*.pwgl"
#+BEGIN_SRC bash
find . -name "*.pwgl"
#+END_SRC
* daily pwgl files
** 6-13
*** ./2017-06-13/daily-pc-set-example.pwgl                             
**** daily pc-set- example

- "construct chords"  randomly selected from any set-class by
cardinality
- assign a random octave and transposition
- decide on various non-mensural features (including arpeggiation?)
  with various "construct-chords" functions assigning various values
  to enumerating an arithmetic-series over the length of the chord
  list
**** picture

[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%205.26.13%20PM.jpg]]
*** ./2017-06-13/trichord-pcset-slider.pwgl
**** trichord-pcset-slider

- use clearly delineated horizontal slider to select a particular trichord
- return both the set-class name and the pcs
**** picture

[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%205.27.32%20PM.jpg]]
*** ./2017-06-13/use-code-boxes-for-pcs.pwgl
**** use-code-boxes-for-pcs
choose one set-type and variously transpose and displace a series of
them into a chord editor
**** picture
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%205.27.48%20PM.jpg]]
** 6-14
*** ./2017-06-14/permute-all-tn-octaves-of-cardinality.pwgl
**** permute all tn octaves of cardinality
- "construct-chords6" takes five arguments to create non-mensural score (arpeggiated) for any given set-type
- will map-enumerate over the whole cardinality?
- uses random permutations of lists (and pitches?)
**** picture
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%205.28.24%20PM.jpg]]

** 6-15
*** ./2017-06-15/add-velocity-to-score-templates.pwgl
**** add-velocity-to-score-templates
use velocity arguments with an existing midi list
**** picture
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%205.28.45%20PM.jpg]]
**** 
*** ./2017-06-15/best-way-to-move-long-non-mensural.pwgl
**** best-way-to-move-long-non-mensural
view a score-editor play (with set analysis scripting)
**** picture
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%207.59.22%20PM.jpg]]
*** ./2017-06-15/document-this-ultimate-pcset-listener.pwgl
**** document this ultimate pcset listener
construct-chords7 with a "construct-score-template" patch
**** picture
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.00.18%20PM.jpg]]
*** ./2017-06-15/many-map-enums-with-score-editors.pwgl
*** ./2017-06-15/map-chords-to-voices.pwgl
**** map chords to voices
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.00.47%20PM.jpg]]
*** ./2017-06-15/simpler-gentler-random-trichord-template.pwgl
**** simpler gentler random trichord template
construct chords7 with a given midi list and a construct-my-score-template
**** picture
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.01.17%20PM.jpg]]
*** ./2017-06-15/ultimate-three-part-pc-harmonies.pwgl
ultimate three part pc harmonies
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.03.15%20PM.jpg]]
** 6-16
*** ./2017-06-16/choosing-equals-pcset-with-multiscore.pwgl
choosing equals pcsert with multiscore
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.03.39%20PM.jpg]]
*** ./2017-06-16/formatting-set-printouts.pwgl
formatting set printouts
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.04.17%20PM.jpg]]
*** ./2017-06-16/manipulating-sc4-10-score.pwgl
manipulating sc4-10 score
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.04.51%20PM.jpg]]
** 6-18
*** ./2017-06-18/collecting-all-multiscore-pmc-rules-in-a-measure.pwgl
collecting all multiscore pmc rules in a measure
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.05.16%20PM.jpg]]
** 6-19
*** ./2017-06-19/formatting-and-writing-out-to-file.pwgl
formatting and writing out to file
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.06.26%20PM.jpg]]
*** ./2017-06-19/no-adjacent-chord-dups-with-single-pcset.pwgl
*** ./2017-06-19/openGL-text-macros.pwgl
openGL text macros
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.07.06%20PM.jpg]]
*** ./2017-06-19/simplified-by-set-pmc-searchspace.pwgl
simplified by set pmc searchspace
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.07.24%20PM.jpg]]
*** ./2017-06-19/understanding-BPFs-and-interpolation.pwgl
understanding bpfs and interpolation
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.07.38%20PM.jpg]]
** 6-20
*** ./2017-06-20/alea-and-breakpoint-functions.pwgl
alea and breakpoint functions
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.08.18%20PM.jpg]]
** 6-22
*** ./2017-06-22/abstraction-box.pwgl
*** ./2017-06-22/chord-editor.pwgl
*** ./2017-06-22/code-box.pwgl
*** ./2017-06-22/empty-pwgl-patch.pwgl
*** ./2017-06-22/enp-constructor.pwgl
*** ./2017-06-22/enp-score-notation.pwgl
*** ./2017-06-22/enp-script.pwgl
*** ./2017-06-22/lisp-code-box.pwgl
*** ./2017-06-22/map-enum.pwgl
*** ./2017-06-22/multi-pmc.pwgl
*** ./2017-06-22/multi-score-pmc.pwgl
*** ./2017-06-22/sc-info.pwgl
*** ./2017-06-22/score-editor.pwgl
*** ./2017-06-22/scs-card.pwgl
*** ./2017-06-22/text-box.pwgl
** 6-23
*** ./2017-06-23/enumerate-beats-to-measures-to-voices.pwgl
enumerate beats to measure to voices
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.09.10%20PM.jpg]]
*** ./2017-06-23/four-four-beats-and-three-eight-measures.pwgl
** 6-24
4/4 beats and 3/8 measures
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.10.00%20PM.jpg]]
*** ./2017-06-24/iterate-your-own-beat-constructor.pwgl
iterate your own beat constructor
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.11.01%20PM.jpg]]
** 6-25
*** ./2017-06-25/translate-three-pulses-code-to-rtm.pwgl
*** ./2017-06-25/one-four-and-two-four-measure-databases.pwgl
[[file:~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%204.25.50%20PM.png][~/Pictures/screenshots/wp-templates/Screen Shot 2017-06-26 at 4.25.50 PM.png]]
*** ./2017-06-25/three-four-measures.pwgl
*** ./2017-06-25/extract-nth-object-from-score.pwgl
extract nth object from score
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.11.22%20PM.jpg]]
*** ./2017-06-25/slider-for-987-four-four-measures.pwgl
1/4 and 2/4 measure databases
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.11.44%20PM.jpg]]


** 6-26
*** ./2017-06-26/complete-three-four-measures-27000.pwgl
complete 3/4 measures 27000
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.16.26%20PM.jpg]]



*** slider for 987 4/4 measures
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.12.58%20PM.jpg]]

*** 3/4 measures
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.13.58%20PM.jpg]]
** ./2017-06-26/produce-but-dont-save-27000.pwgl
*** produce but don't save 27000 measures

[[~/Pictures/screenshots/wp-templates/Screen Shot 2017-06-26 at 8.17.48 PM.jpg]]
** translate three pulses code to rtm
[[~/Pictures/screenshots/wp-templates/Screen%20Shot%202017-06-26%20at%208.14.45%20PM.jpg]]
* MUSC7911
** ./large/MUSC7911.pwgl
* misc.
** 
*** ./miscellaneous/2017-06-08/basic-pwgl-abstraction-as-lisp.pwgl
*** ./miscellaneous/2017-06-08/blank.pwgl
*** ./miscellaneous/2017-06-08/constructing-beats-and-measures2.pwgl
*** ./miscellaneous/2017-06-08/generating-basic-RTMs.pwgl
*** ./miscellaneous/2017-06-08/generating-basic-RTMs2.pwgl
** 
*** ./miscellaneous/2017-06-09/load-an-abstraction-maybe.pwgl
*** ./miscellaneous/2017-06-09/master-pc-sets-list.pwgl
*** ./miscellaneous/2017-06-09/reassigning-pitches-with-RTMs.pwgl
*** ./miscellaneous/2017-06-09/sc-info-code-in-blocks.pwgl
** 
*** ./miscellaneous/2017-06-10/arpeggio-sets-experiment.pwgl
*** ./miscellaneous/2017-06-10/developing-variance.pwgl
*** ./miscellaneous/2017-06-10/filtering-sc-info.pwgl
*** ./miscellaneous/2017-06-10/four-parts-as-chords.pwgl
*** ./miscellaneous/2017-06-10/generate-triadic-hexachords.pwgl
*** ./miscellaneous/2017-06-10/IFUNC-patching.pwgl
*** ./miscellaneous/2017-06-10/PMC-tetrachords-7911.pwgl
*** ./miscellaneous/2017-06-10/score-harmony-scripting.pwgl
*** ./miscellaneous/2017-06-10/two-chord-phrase-7911.pwgl
*** ./miscellaneous/2017-06-10/voiced-hexachords-7911.pwgl
** 
*** ./most-useful-abstractions/set-choice-abstraction.pwgl

